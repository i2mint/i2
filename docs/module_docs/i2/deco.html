
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>i2.deco &#8212; i2 0.0.38 documentation</title>
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="i2.doc_mint" href="doc_mint.html" />
    <link rel="prev" title="i2.chain_map" href="chain_map.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-i2.deco">
<span id="i2-deco"></span><h1>i2.deco<a class="headerlink" href="#module-i2.deco" title="Permalink to this headline">¶</a></h1>
<p>Decorator tools</p>
<dl class="py class">
<dt id="i2.deco.MultiFunc">
<em class="property">class </em><code class="sig-prename descclassname">i2.deco.</code><code class="sig-name descname">MultiFunc</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">funcs</span><span class="o">=</span><span class="default_value">()</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/deco.html#MultiFunc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#i2.deco.MultiFunc" title="Permalink to this definition">¶</a></dt>
<dd><p>Call multiple functions, using a pool of arguments that they will draw from.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">i2.tests.objects_for_testing</span> <span class="kn">import</span> <span class="n">formula1</span><span class="p">,</span> <span class="n">sum_of_args</span><span class="p">,</span> <span class="n">mult</span><span class="p">,</span> <span class="n">add</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mf1</span> <span class="o">=</span> <span class="n">MultiFunc</span><span class="p">(</span><span class="n">funcs</span><span class="o">=</span><span class="p">(</span><span class="n">formula1</span><span class="p">,</span> <span class="n">mult</span><span class="p">,</span> <span class="n">add</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kwargs_for_func</span> <span class="o">=</span> <span class="n">mf1</span><span class="o">.</span><span class="n">kwargs_for_func</span><span class="p">(</span><span class="n">w</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<p>What’s this for? Well, the raison d’etre of <cite>MultiFunc</cite> is to be able to do this:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">add</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span> <span class="o">==</span> <span class="n">add</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs_for_func</span><span class="p">[</span><span class="n">add</span><span class="p">])</span>
</pre></div>
</div>
<p>This wouldn’t work on all functions since some functions have position only arguments (e.g. <code class="docutils literal notranslate"><span class="pre">formula1</span></code>).
Therefore <code class="docutils literal notranslate"><span class="pre">MultiFunc</span></code> holds a “normalized” form of the functions; namely one that handles such things as
postion only and varargs.</p>
<p># TODO: Make this work!
#   Right now raises: TypeError: formula1() got some positional-only arguments passed as keyword arguments: ‘w’
# &gt;&gt;&gt; assert formula1(1, x=2, z=3) == mf1.normalized_funcs[formula1](<a href="#id1"><span class="problematic" id="id2">**</span></a>kwargs_for_func[formula1])</p>
<p>Note: In the following, it looks like <code class="docutils literal notranslate"><span class="pre">MultiFunc</span></code> instances return dicts whose keys are strings.
This is not the case.
The keys are functions: The same functions that were input.
The reason for not using functions is that when printed, they include their hash, which invalidates the doctests.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">print_dict</span><span class="p">(</span><span class="n">d</span><span class="p">):</span>  <span class="c1"># just a util for this doctest</span>
<span class="gp">... </span>    <span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>
<span class="gp">... </span>    <span class="n">pprint</span><span class="p">({</span><span class="n">k</span><span class="o">.</span><span class="vm">__name__</span><span class="p">:</span> <span class="n">d</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mf1</span> <span class="o">=</span> <span class="n">MultiFunc</span><span class="p">(</span><span class="n">funcs</span><span class="o">=</span><span class="p">(</span><span class="n">formula1</span><span class="p">,</span> <span class="n">mult</span><span class="p">,</span> <span class="n">add</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_dict</span><span class="p">(</span><span class="n">mf1</span><span class="o">.</span><span class="n">kwargs_for_func</span><span class="p">(</span><span class="n">w</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">5</span><span class="p">))</span> 
<span class="go">{&#39;add&#39;: {&#39;a&#39;: 4, &#39;b&#39;: 5},</span>
<span class="go"> &#39;formula1&#39;: {&#39;w&#39;: 1, &#39;x&#39;: 2, &#39;z&#39;: 3},</span>
<span class="go"> &#39;mult&#39;: {&#39;x&#39;: 2}}</span>
</pre></div>
</div>
<p>Oh, and you can actually see the signature of kwargs_for_func:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">inspect</span> <span class="kn">import</span> <span class="n">signature</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">signature</span><span class="p">(</span><span class="n">mf1</span><span class="p">)</span>
<span class="go">&lt;Signature (w, x: float, a, y=1, z: int = 1, b: float = 0.0)&gt;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mf2</span> <span class="o">=</span> <span class="n">MultiFunc</span><span class="p">(</span><span class="n">funcs</span><span class="o">=</span><span class="p">(</span><span class="n">formula1</span><span class="p">,</span> <span class="n">mult</span><span class="p">,</span> <span class="n">add</span><span class="p">,</span> <span class="n">sum_of_args</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_dict</span><span class="p">(</span><span class="n">mf2</span><span class="o">.</span><span class="n">kwargs_for_func</span><span class="p">(</span><span class="n">w</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">),</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">42</span><span class="p">},</span> <span class="n">extra_stuff</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">))</span>
<span class="go">{&#39;add&#39;: {&#39;a&#39;: 4, &#39;b&#39;: 5},</span>
<span class="go"> &#39;formula1&#39;: {&#39;w&#39;: 1, &#39;x&#39;: 2, &#39;z&#39;: 3},</span>
<span class="go"> &#39;mult&#39;: {&#39;x&#39;: 2},</span>
<span class="go"> &#39;sum_of_args&#39;: {&#39;kwargs&#39;: {&#39;a&#39;: 4,</span>
<span class="go">                            &#39;args&#39;: (7, 8),</span>
<span class="go">                            &#39;b&#39;: 5,</span>
<span class="go">                            &#39;extra_stuff&#39;: &#39;ignore&#39;,</span>
<span class="go">                            &#39;kwargs&#39;: {&#39;a&#39;: 42},</span>
<span class="go">                            &#39;w&#39;: 1,</span>
<span class="go">                            &#39;x&#39;: 2,</span>
<span class="go">                            &#39;z&#39;: 3}}}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py exception">
<dt id="i2.deco.OutputPostProcessingError">
<em class="property">exception </em><code class="sig-prename descclassname">i2.deco.</code><code class="sig-name descname">OutputPostProcessingError</code><a class="reference internal" href="../../_modules/i2/deco.html#OutputPostProcessingError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#i2.deco.OutputPostProcessingError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="i2.deco.add_method">
<code class="sig-prename descclassname">i2.deco.</code><code class="sig-name descname">add_method</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj</span></em>, <em class="sig-param"><span class="n">method_func</span></em>, <em class="sig-param"><span class="n">method_name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">class_name</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/deco.html#add_method"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#i2.deco.add_method" title="Permalink to this definition">¶</a></dt>
<dd><p>Dynamically add a method to an object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> – The object to add a method to</p></li>
<li><p><strong>method_func</strong> – The function to use as a method. The first argument must be the object itself
(usually called self)</p></li>
<li><p><strong>method_name</strong> – The desired function name. If None, will take method_func.__name__</p></li>
<li><p><strong>class_name</strong> – The desired class name. If None, will take type(obj).__name__</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the object, but with the additional method (or a different function for it)</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">times</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">y</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">plus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">add_method</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">plus</span><span class="p">,</span> <span class="s1">&#39;__call__&#39;</span><span class="p">)</span>  <span class="c1"># add a __call__ method, assigning it to plus</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="go">12</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">add_method</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">times</span><span class="p">,</span> <span class="s1">&#39;__call__&#39;</span><span class="p">)</span>  <span class="c1"># reassign the __call__ method to times instead</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="go">20</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">add_method</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">plus</span><span class="p">,</span> <span class="s1">&#39;__getitem__&#39;</span><span class="p">)</span>  <span class="c1"># assign the method __getitem__ to plus</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>  <span class="c1"># see that it works</span>
<span class="go">12</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># and that we still have our __call__ method</span>
<span class="go">20</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="i2.deco.assert_attrs">
<code class="sig-prename descclassname">i2.deco.</code><code class="sig-name descname">assert_attrs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">attrs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/deco.html#assert_attrs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#i2.deco.assert_attrs" title="Permalink to this definition">¶</a></dt>
<dd><p>Asserts, at construction time, that the class contains a specific set of attributes
:param attrs: An attribute name (string) or a list of attribute names whose existence needs to be enforced.
:return: A class decorator that will enforce the existence of the attrs when an instance is made</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nd">@assert_attrs</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">... </span><span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">bar</span> <span class="o">=</span> <span class="mi">10</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="p">()</span>
<span class="gp">... </span><span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;AttributeError, as expected, because missing the foo attribute&quot;</span><span class="p">)</span>
<span class="go">AttributeError, as expected, because missing the foo attribute</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@assert_attrs</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">... </span><span class="k">class</span> <span class="nc">B</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">B</span><span class="p">()</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">bar</span> <span class="o">=</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">B</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@assert_attrs</span><span class="p">([</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">])</span>
<span class="gp">... </span><span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="i2.deco.double_up_as_factory">
<code class="sig-prename descclassname">i2.deco.</code><code class="sig-name descname">double_up_as_factory</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">decorator_func</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/deco.html#double_up_as_factory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#i2.deco.double_up_as_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>Repurpose a decorator both as it’s original form, and as a decorator factory.</p>
<p>That is, from a decorator that is defined do <code class="docutils literal notranslate"><span class="pre">wrapped_func</span> <span class="pre">=</span> <span class="pre">decorator(func,</span> <span class="pre">**params)</span></code>,
make it also be able to do <code class="docutils literal notranslate"><span class="pre">wrapped_func</span> <span class="pre">=</span> <span class="pre">decorator(**params)(func)</span></code>.</p>
<p>Note: You’ll only be able to do this if all but the first argument are keyword-only,
and the first argument (the function to decorate) has a default of <code class="docutils literal notranslate"><span class="pre">None</span></code> (this is for your own good).
This is validated before making the “double up as factory” decorator.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nd">@double_up_as_factory</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">decorator</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">multiplier</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">_func</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">*</span> <span class="n">multiplier</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">_func</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foo</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wrapped_foo</span> <span class="o">=</span> <span class="n">decorator</span><span class="p">(</span><span class="n">foo</span><span class="p">,</span> <span class="n">multiplier</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wrapped_foo</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="go">30</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">multiply_by_3</span> <span class="o">=</span> <span class="n">decorator</span><span class="p">(</span><span class="n">multiplier</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wrapped_foo</span> <span class="o">=</span> <span class="n">multiply_by_3</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wrapped_foo</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="go">9</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@decorator</span><span class="p">(</span><span class="n">multiplier</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foo</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="go">9</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="i2.deco.ensure_iterable_args">
<code class="sig-prename descclassname">i2.deco.</code><code class="sig-name descname">ensure_iterable_args</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">condition_of_argname</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/deco.html#ensure_iterable_args"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#i2.deco.ensure_iterable_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrap a function so that specific arguments are assured to be iterable if
they meet specific conditions.</p>
<p>The condition, in the example below, is being a string.
Note that in general, the condition needs to be a boolean function.
The explicit form of our example would say <cite>names=lambda x: isinstance(x, str)</cite>,
but <cite>ensure_iterable_args</cite> allows the convenience of just specifying the type,
or a tuple of types, and the actually boolean function will be made for you.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nd">@ensure_iterable_args</span><span class="p">(</span><span class="n">names</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">greet_people</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="n">greeting</span><span class="o">=</span><span class="s1">&#39;Hello&#39;</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">yield</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">greeting</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">!&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">greet_people</span><span class="p">([</span><span class="s1">&#39;Alice&#39;</span><span class="p">,</span> <span class="s1">&#39;Bob&#39;</span><span class="p">]))</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;Hello Alice!&#39;</span><span class="p">,</span> <span class="s1">&#39;Hello Bob!&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">greet_people</span><span class="p">(</span><span class="s1">&#39;Alice&#39;</span><span class="p">))</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;Hello Alice!&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Note that to decorate a function, you can also use the form:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">greet_people</span> <span class="o">=</span> <span class="n">ensure_iterable_args</span><span class="p">(</span><span class="n">greet_people</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="i2.deco.get_callable_from_factory_if_no_arguments">
<code class="sig-prename descclassname">i2.deco.</code><code class="sig-name descname">get_callable_from_factory_if_no_arguments</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func_or_factory_thereof</span><span class="p">:</span> <span class="n">Callable</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/deco.html#get_callable_from_factory_if_no_arguments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#i2.deco.get_callable_from_factory_if_no_arguments" title="Permalink to this definition">¶</a></dt>
<dd><p>Will return the input itself if it’s a callable with at least one argument.
If not, it will consider it to be a factory, call it to get the actual
callable object that the user presumably is seeking to get</p>
</dd></dl>

<dl class="py function">
<dt id="i2.deco.input_output_decorator">
<code class="sig-prename descclassname">i2.deco.</code><code class="sig-name descname">input_output_decorator</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">preprocess</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">postprocess</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/deco.html#input_output_decorator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#i2.deco.input_output_decorator" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a decorator that preprocesses inputs and postprocesses outputs.
Use it if you want to transform the input of a function or method before calling it, or if you want
to transform the returned value before returning it.
:param preprocess: Function to be applied to input
:param postprocess: Function to be applied to output
:return: a decorator that preprocesses inputs and postprocesses outputs
See also: preprocess and postprocess decorators if you need only to pre or post process!</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Examples with &quot;normal functions&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
<span class="gp">... </span>    <span class="sd">&#39;&#39;&#39;Some doc...&#39;&#39;&#39;</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ff</span> <span class="o">=</span> <span class="n">input_output_decorator</span><span class="p">()(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">((</span><span class="n">ff</span><span class="p">(</span><span class="mf">5.0</span><span class="p">)))</span>
<span class="go">15.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ff</span> <span class="o">=</span> <span class="n">input_output_decorator</span><span class="p">(</span><span class="n">preprocess</span><span class="o">=</span><span class="nb">int</span><span class="p">)(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">((</span><span class="n">ff</span><span class="p">(</span><span class="mf">5.0</span><span class="p">)))</span>
<span class="go">15</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ff</span> <span class="o">=</span> <span class="n">input_output_decorator</span><span class="p">(</span><span class="n">preprocess</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">postprocess</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s2">&quot;Hello </span><span class="si">{}</span><span class="s2">!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">))(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">((</span><span class="n">ff</span><span class="p">(</span><span class="s1">&#39;5&#39;</span><span class="p">)))</span>
<span class="go">Hello 15!</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ff</span> <span class="o">=</span> <span class="n">input_output_decorator</span><span class="p">(</span><span class="n">postprocess</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s2">&quot;Hello </span><span class="si">{}</span><span class="s2">!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">))(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">((</span><span class="n">ff</span><span class="p">(</span><span class="mf">5.0</span><span class="p">)))</span>
<span class="go">Hello 15.0!</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">((</span><span class="n">ff</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">))</span>
<span class="go">Some doc...</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># examples with methods (bounded, class methods, static methods</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">F</span><span class="p">:</span>
<span class="gp">... </span>    <span class="sd">&#39;&#39;&#39;This is not what you&#39;d expect: The doc of the class, not the function&#39;&#39;&#39;</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
<span class="gp">... </span>        <span class="sd">&#39;&#39;&#39;Initialize&#39;&#39;&#39;</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
<span class="gp">... </span>        <span class="sd">&#39;&#39;&#39;Some doc...&#39;&#39;&#39;</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">x</span>
<span class="gp">... </span>    <span class="nd">@staticmethod</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">static_method</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="s2">&quot;What </span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="s2"> you have&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nd">@classmethod</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">class_method</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> likes </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">F</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ff</span> <span class="o">=</span> <span class="n">input_output_decorator</span><span class="p">()(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">((</span><span class="n">ff</span><span class="p">(</span><span class="mf">5.0</span><span class="p">)))</span>
<span class="go">15.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ff</span> <span class="o">=</span> <span class="n">input_output_decorator</span><span class="p">(</span><span class="n">preprocess</span><span class="o">=</span><span class="nb">int</span><span class="p">)(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">((</span><span class="n">ff</span><span class="p">(</span><span class="mf">5.0</span><span class="p">)))</span>
<span class="go">15</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ff</span> <span class="o">=</span> <span class="n">input_output_decorator</span><span class="p">(</span><span class="n">preprocess</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">postprocess</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s2">&quot;Hello </span><span class="si">{}</span><span class="s2">!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">))(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">((</span><span class="n">ff</span><span class="p">(</span><span class="s1">&#39;5&#39;</span><span class="p">)))</span>
<span class="go">Hello 15!</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ff</span> <span class="o">=</span> <span class="n">input_output_decorator</span><span class="p">(</span><span class="n">postprocess</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s2">&quot;Hello </span><span class="si">{}</span><span class="s2">!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">))(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">((</span><span class="n">ff</span><span class="p">(</span><span class="mf">5.0</span><span class="p">)))</span>
<span class="go">Hello 15.0!</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">((</span><span class="n">ff</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">))</span>
<span class="go">This is not what you&#39;d expect: The doc of the class, not the function</span>
</pre></div>
</div>
<p># &gt;&gt;&gt;
# &gt;&gt;&gt; f.static_method = input_output_decorator(preprocess=lambda x: ‘”’ + x + ‘”’,
# …                                          postprocess=lambda x: x + ‘!!!’)(f.static_method)
# &gt;&gt;&gt; print(ff.static_method(‘big’, ‘eyes’))
# What big “eyes” you have!!!</p>
</dd></dl>

<dl class="py function">
<dt id="i2.deco.kwargs_for_func">
<code class="sig-prename descclassname">i2.deco.</code><code class="sig-name descname">kwargs_for_func</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">funcs</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/deco.html#kwargs_for_func"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#i2.deco.kwargs_for_func" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>funcs</strong> – </p></li>
<li><p><strong>kwargs</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">i2.tests.objects_for_testing</span> <span class="kn">import</span> <span class="n">formula1</span><span class="p">,</span> <span class="n">sum_of_args</span><span class="p">,</span> <span class="n">mult</span><span class="p">,</span> <span class="n">add</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">print_dict</span><span class="p">(</span><span class="n">d</span><span class="p">):</span>  <span class="c1"># just a util for this doctest</span>
<span class="gp">... </span>    <span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>
<span class="gp">... </span>    <span class="n">pprint</span><span class="p">({</span><span class="n">k</span><span class="o">.</span><span class="vm">__name__</span><span class="p">:</span> <span class="n">d</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_dict</span><span class="p">(</span><span class="n">kwargs_for_func</span><span class="p">(</span><span class="n">formula1</span><span class="p">,</span> <span class="n">mult</span><span class="p">,</span> <span class="n">add</span><span class="p">,</span>
<span class="gp">... </span>                          <span class="n">w</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">5</span><span class="p">))</span> 
<span class="go">{&#39;add&#39;: {&#39;a&#39;: 4, &#39;b&#39;: 5},</span>
<span class="go"> &#39;formula1&#39;: {&#39;w&#39;: 1, &#39;x&#39;: 2, &#39;z&#39;: 3},</span>
<span class="go"> &#39;mult&#39;: {&#39;x&#39;: 2}}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="i2.deco.mk_args_kwargs_merger">
<code class="sig-prename descclassname">i2.deco.</code><code class="sig-name descname">mk_args_kwargs_merger</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/deco.html#mk_args_kwargs_merger"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#i2.deco.mk_args_kwargs_merger" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a function that will return a dict containing all {argname: argval} pairs from a function’s call.
That is, it merges all non-keyword arguments with the keyword-arguments, with the right name, so that
the arguments can be handled more uniformly.
:param func: The function that will be called, whose signature should be looked at to make the</p>
<blockquote>
<div><p>merging function</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A function merge_args_and_kwargs(args, kwargs) that can be used to merge arguments</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">a</span> <span class="o">*</span> <span class="p">(</span><span class="n">b</span> <span class="o">+</span> <span class="n">c</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">merger</span> <span class="o">=</span> <span class="n">mk_args_kwargs_merger</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">dict</span><span class="p">(</span><span class="n">merger</span><span class="p">([</span><span class="mi">1</span><span class="p">],</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">}))</span>
<span class="go">{&#39;a&#39;: 1, &#39;b&#39;: 10}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">dict</span><span class="p">(</span><span class="n">merger</span><span class="p">([],</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">}))</span>
<span class="go">{&#39;a&#39;: 1, &#39;b&#39;: 10}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">dict</span><span class="p">(</span><span class="n">merger</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> <span class="p">{}))</span>
<span class="go">{&#39;a&#39;: 1, &#39;b&#39;: 10}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">dict</span><span class="p">(</span><span class="n">merger</span><span class="p">([],</span> <span class="p">{}))</span>
<span class="go">{}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Usage demo:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="o">**</span><span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">})</span> <span class="o">==</span> <span class="n">func</span><span class="p">(</span><span class="o">**</span><span class="n">merger</span><span class="p">([</span><span class="mi">1</span><span class="p">],</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">}))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="p">[],</span> <span class="o">**</span><span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">})</span> <span class="o">==</span> <span class="n">func</span><span class="p">(</span><span class="o">**</span><span class="n">merger</span><span class="p">([],</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">}))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">func</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">})</span> <span class="o">==</span> <span class="n">func</span><span class="p">(</span><span class="o">**</span><span class="n">merger</span><span class="p">([],</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">}))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="i2.deco.mk_call_logger">
<code class="sig-prename descclassname">i2.deco.</code><code class="sig-name descname">mk_call_logger</code><span class="sig-paren">(</span><em class="sig-param">logger=&lt;built-in function print&gt;, what_to_log: Callable[[Callable, Tuple, Dict], Any] = &lt;function _call_signature&gt;, log_output=False, func_is_bounded=False</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/deco.html#mk_call_logger"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#i2.deco.mk_call_logger" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a decorator that logs each call to the wrapped function.
:param logger: The actual function that logs stuff. Default is print. The “stuff” it logs is given by</p>
<blockquote>
<div><p>the what_to_log argument (a function).</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>what_to_log</strong> – A function taking inputs (func, args, kwargs) of the call, and returning something to log
(usually, and by default, a string)</p></li>
<li><p><strong>func_is_bounded</strong> – Whether the function is bounded (like a method) or not</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A decorator</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Example of use on (unbounded) function, with default args</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@mk_call_logger</span><span class="p">()</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">useless_computation</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="s1">&#39;foo&#39;</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">z</span> <span class="o">*</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">useless_computation</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="s1">&#39;ha&#39;</span><span class="p">)</span>
<span class="go">useless_computation(3, y=1, z=&#39;ha&#39;)</span>
</pre></div>
</div>
<p>The same example, but with output logging too</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nd">@mk_call_logger</span><span class="p">(</span><span class="n">log_output</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">useless_computation</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="s1">&#39;foo&#39;</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">z</span> <span class="o">*</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">useless_computation</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="s1">&#39;ha&#39;</span><span class="p">)</span>
<span class="go">useless_computation(3, y=1, z=&#39;ha&#39;)</span>
<span class="go">-&gt; hahahaha</span>
</pre></div>
</div>
<p>And now a bit more involved…</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Example of use on class method, with a different what_to_log function.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">+</span> <span class="n">x</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">multiply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">*</span> <span class="n">x</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">_name_args_kwargs</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="s2">&quot;Calling </span><span class="si">{}</span><span class="s2"> with</span><span class="se">\n</span><span class="s2">  args=</span><span class="si">{}</span><span class="se">\n</span><span class="s2">  kwargs=</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">log_calls</span> <span class="o">=</span> <span class="n">mk_call_logger</span><span class="p">(</span><span class="n">what_to_log</span><span class="o">=</span><span class="n">_name_args_kwargs</span><span class="p">,</span> <span class="n">func_is_bounded</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">method</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;add&#39;</span><span class="p">,</span> <span class="s1">&#39;multiply&#39;</span><span class="p">]:</span>
<span class="gp">... </span>    <span class="n">A_method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">method</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">setattr</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">mk_call_logger</span><span class="p">(</span><span class="n">what_to_log</span><span class="o">=</span><span class="n">_name_args_kwargs</span><span class="p">,</span> <span class="n">func_is_bounded</span><span class="o">=</span><span class="kc">True</span><span class="p">)(</span><span class="n">A_method</span><span class="p">))</span>
<span class="gp">...</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="go">Calling add with</span>
<span class="go">  args=()</span>
<span class="go">  kwargs={&#39;x&#39;: 2}</span>
<span class="go">12</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="go">Calling multiply with</span>
<span class="go">  args=(2,)</span>
<span class="go">  kwargs={}</span>
<span class="go">20</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="i2.deco.mk_method_trans_spec_from_methods_specs_dict">
<code class="sig-prename descclassname">i2.deco.</code><code class="sig-name descname">mk_method_trans_spec_from_methods_specs_dict</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">methods_specs_dict</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/deco.html#mk_method_trans_spec_from_methods_specs_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#i2.deco.mk_method_trans_spec_from_methods_specs_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility to make inputs for wrap_class_methods_input_and_output more easily.
:param methods_specs_dict: a dict where</p>
<blockquote>
<div><p>keys are method names (either a single string, or a tuple of strings)
values are the trans_spec dicts that should be associated to those methods</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A dict in the method_trans_spec (input of wrap_class_method) format.</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">methods_specs_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">methods_specs_dict</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">methods_specs_dict</span><span class="p">[(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">)]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;z&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="s1">&#39;method_output_trans&#39;</span><span class="p">:</span> <span class="nb">float</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">methods_specs_dict</span><span class="p">[(</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="p">)]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;zz&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">method_trans_spec</span> <span class="o">=</span> <span class="n">mk_method_trans_spec_from_methods_specs_dict</span><span class="p">(</span><span class="n">methods_specs_dict</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">method_trans_spec</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="go">[&#39;foo&#39;, &#39;bar&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">method_trans_spec</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">]</span>
<span class="go">{&#39;x&#39;: &lt;class &#39;str&#39;&gt;, &#39;y&#39;: &lt;class &#39;int&#39;&gt;, &#39;z&#39;: &lt;class &#39;list&#39;&gt;, &#39;method_output_trans&#39;: &lt;class &#39;float&#39;&gt;}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">method_trans_spec</span><span class="p">[</span><span class="s1">&#39;bar&#39;</span><span class="p">]</span>
<span class="go">{&#39;z&#39;: &lt;class &#39;list&#39;&gt;, &#39;method_output_trans&#39;: &lt;class &#39;float&#39;&gt;, &#39;zz&#39;: &lt;class &#39;int&#39;&gt;}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="i2.deco.postprocess">
<code class="sig-prename descclassname">i2.deco.</code><code class="sig-name descname">postprocess</code><span class="sig-paren">(</span><em class="sig-param">post</em>, <em class="sig-param">caught_post_errors=(&lt;class 'Exception'&gt;</em>, <em class="sig-param">)</em>, <em class="sig-param">verbose_error_message=False</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/deco.html#postprocess"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#i2.deco.postprocess" title="Permalink to this definition">¶</a></dt>
<dd><p>Add some post-processing after a function</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>post</strong> – The function to apply to the output</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">list_range</span> <span class="o">=</span> <span class="n">postprocess</span><span class="p">(</span><span class="nb">list</span><span class="p">)(</span><span class="nb">range</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">list_range</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="go">[0, 1, 2, 3]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sum_range</span> <span class="o">=</span> <span class="n">postprocess</span><span class="p">(</span><span class="nb">sum</span><span class="p">)(</span><span class="nb">range</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sum_range</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="go">6</span>
</pre></div>
</div>
<p>Note: The decorator also sticks the return annotation of the post function on the wrapped one.</p>
<p>Use cases:</p>
<ul class="simple">
<li><dl class="simple">
<dt>Changing a generator into a container returning function</dt><dd><p>In many situations, writing a generator is simpler than writing a function
that accumulates a list or a dict etc.
So here, you just write the generator and tag this decorator on top, to get the same effect.</p>
</dd>
</dl>
</li>
</ul>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">inspect</span> <span class="kn">import</span> <span class="n">signature</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@postprocess</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">bar</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">yield</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="n">i</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bar</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">{&#39;0&#39;: 0, &#39;1&#39;: 1, &#39;2&#39;: 2}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">signature</span><span class="p">(</span><span class="n">bar</span><span class="p">)</span>
<span class="go">&lt;Signature (x) -&gt; dict&gt;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@postprocess</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">yield</span> <span class="n">i</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foo</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">[0, 1, 2]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">inspect</span> <span class="kn">import</span> <span class="n">signature</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">signature</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
<span class="go">&lt;Signature (x) -&gt; list&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Triggering something (like logging, or forwarding) when a function returns</p></li>
</ul>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">log_this</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Logging </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logged_foo</span> <span class="o">=</span> <span class="n">postprocess</span><span class="p">(</span><span class="n">log_this</span><span class="p">)(</span><span class="n">foo</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">logged_foo</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="go">Logging [0, 1]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">t</span> <span class="o">==</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<ul class="simple">
<li><dl class="simple">
<dt>Using a function that does a lot to make several functions that do less.</dt><dd><p>(e.g. Extracting/making a python object from a function returning a raw http <a href="#id3"><span class="problematic" id="id4">response_</span></a></p>
</dd>
</dl>
</li>
</ul>
</dd></dl>

<dl class="py function">
<dt id="i2.deco.preprocess_arguments">
<code class="sig-prename descclassname">i2.deco.</code><code class="sig-name descname">preprocess_arguments</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pre</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/deco.html#preprocess_arguments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#i2.deco.preprocess_arguments" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply a function to args, kwargs and use the transformed in the decorated function</p>
</dd></dl>

<dl class="py function">
<dt id="i2.deco.transform_args">
<code class="sig-prename descclassname">i2.deco.</code><code class="sig-name descname">transform_args</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dflt_trans_func</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">/</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">trans_func_for_arg</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/deco.html#transform_args"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#i2.deco.transform_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a decorator that transforms function arguments before calling the function.
Works with plain functions and bounded methods.
For example:</p>
<blockquote>
<div><ul class="simple">
<li><p>original argument: a relative path –&gt; used argument: a full path</p></li>
<li><p>original argument: a pickle filepath –&gt; used argument: the loaded object</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rootdir</strong> – rootdir to be used for all name arguments of target function</p></li>
<li><p><strong>name_arg</strong> – the position (int) or argument name of the argument containing the name</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a decorator</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Example with a plain function</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;default_c&#39;</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="s2">&quot;a=</span><span class="si">{a}</span><span class="s2">, b=</span><span class="si">{b}</span><span class="s2">, c=</span><span class="si">{c}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">prepend_root</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="s1">&#39;ROOT/&#39;</span> <span class="o">+</span> <span class="n">x</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">assert</span> <span class="n">f</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;a=foo, b=bar, c=3&#39;</span>
<span class="gp">... </span>    <span class="n">ff</span> <span class="o">=</span> <span class="n">transform_args</span><span class="p">()(</span><span class="n">f</span><span class="p">)</span>  <span class="c1"># no transformation specification, so function is unchanged</span>
<span class="gp">... </span>    <span class="k">assert</span> <span class="n">ff</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;a=foo, b=bar, c=3&#39;</span>
<span class="gp">... </span>    <span class="n">ff</span> <span class="o">=</span> <span class="n">transform_args</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">prepend_root</span><span class="p">)(</span><span class="n">f</span><span class="p">)</span>  <span class="c1"># prepend root to a</span>
<span class="gp">... </span>    <span class="k">assert</span> <span class="n">ff</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;a=ROOT/foo, b=bar, c=3&#39;</span>  <span class="c1"># note: testing different order of args</span>
<span class="gp">... </span>    <span class="n">ff</span> <span class="o">=</span> <span class="n">transform_args</span><span class="p">(</span><span class="n">b</span><span class="o">=</span><span class="n">prepend_root</span><span class="p">)(</span><span class="n">f</span><span class="p">)</span>  <span class="c1"># prepend root to b</span>
<span class="gp">... </span>    <span class="k">assert</span> <span class="n">ff</span><span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;a=foo, b=ROOT/bar, c=3&#39;</span>  <span class="c1"># note: testing different order of args</span>
<span class="gp">... </span>    <span class="n">ff</span> <span class="o">=</span> <span class="n">transform_args</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">prepend_root</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="n">prepend_root</span><span class="p">)(</span><span class="n">f</span><span class="p">)</span>  <span class="c1"># prepend root to a and b</span>
<span class="gp">... </span>    <span class="k">assert</span> <span class="n">ff</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;a=ROOT/foo, b=ROOT/bar, c=3&#39;</span>
<span class="gp">... </span>    <span class="k">assert</span> <span class="n">ff</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;a=ROOT/foo, b=ROOT/bar, c=default_c&#39;</span>  <span class="c1"># defaults still work</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Example with bounded method, wrapping from instance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">sep</span> <span class="o">=</span> <span class="n">sep</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;default_c&#39;</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;a=</span><span class="si">{</span><span class="n">a</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">sep</span><span class="si">}</span><span class="s2"> b=</span><span class="si">{</span><span class="n">b</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">sep</span><span class="si">}</span><span class="s2"> c=</span><span class="si">{</span><span class="n">c</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="p">(</span><span class="n">sep</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">f</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Example with bounded method, wrapping from class</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">A</span><span class="o">.</span><span class="n">f</span> <span class="o">=</span> <span class="n">transform_args</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">prepend_root</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="n">prepend_root</span><span class="p">)(</span><span class="n">A</span><span class="o">.</span><span class="n">f</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="p">(</span><span class="n">sep</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">a</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;a=ROOT/foo, b=ROOT/bar, c=3&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">a</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;a=ROOT/foo, b=ROOT/bar, c=default_c&#39;</span>  <span class="c1"># defaults still work</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="i2.deco.wrap_class_methods">
<code class="sig-prename descclassname">i2.deco.</code><code class="sig-name descname">wrap_class_methods</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">_return_a_copy_of_the_class</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">_raise_error_if_non_existent_method</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">wrapper_for_method</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/deco.html#wrap_class_methods"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#i2.deco.wrap_class_methods" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a decorator that wraps specific methods.</p>
<p>IMPORTANT: The decorator will by default return a copy of the class. This might incur some run time overhead.
If this is desirable, for example, when you want to create several decorations of a same class.
If you want to change the class itself (e.g. you’re only loading it once in a module, and decorating it), then
specify _return_a_copy_of_the_class=False</p>
<p>Note that _return_a_copy_of_the_class=True has a side effect of building russian dolls of essentially subclasses
of the class, which may have some undesirable results if repeated too many times.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_return_a_copy_of_the_class</strong> – Specifies whether to
return a copy of the class (_return_a_copy_of_the_class=True, the default),
or change the actual loaded class itself (_return_a_copy_of_the_class=False)</p></li>
<li><p><strong>wrapper_for_method</strong> – method_name=wrapper_function pairs.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A class wrapper. That is, a decorator that takes a class and returns a decorated version of it
(or decaorates “in-place” if _return_a_copy_of_the_class=False</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p>wrap_method_output: The function that is called for every method we wrap.</p></li>
<li><dl class="simple">
<dt>transform_class_method_input_and_output: A wrap_class_methods that is specialized for input arg and output</dt><dd><p>transformation.</p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">wraps</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">+</span> <span class="n">x</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">multiply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">*</span> <span class="n">x</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="go">12</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="go">20</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">log_calls</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">name</span> <span class="o">=</span> <span class="n">func</span><span class="o">.</span><span class="vm">__name__</span>
<span class="gp">... </span>    <span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">_func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Calling </span><span class="si">{}</span><span class="s2"> with</span><span class="se">\n</span><span class="s2">  args=</span><span class="si">{}</span><span class="se">\n</span><span class="s2">  kwargs=</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">))</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">_func</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">AA</span> <span class="o">=</span> <span class="n">wrap_class_methods</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">log_calls</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;add&#39;</span><span class="p">,</span> <span class="s1">&#39;multiply&#39;</span><span class="p">]})(</span><span class="n">A</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">AA</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="go">Calling add with</span>
<span class="go">  args=()</span>
<span class="go">  kwargs={&#39;x&#39;: 3}</span>
<span class="go">13</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">Calling multiply with</span>
<span class="go">  args=(3,)</span>
<span class="go">  kwargs={}</span>
<span class="go">30</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="i2.deco.wrap_class_methods_input_and_output">
<code class="sig-prename descclassname">i2.deco.</code><code class="sig-name descname">wrap_class_methods_input_and_output</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">_return_a_copy_of_the_class</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">_raise_error_if_non_existent_method</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">method_trans_spec</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/deco.html#wrap_class_methods_input_and_output"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#i2.deco.wrap_class_methods_input_and_output" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a decorator that wraps specific methods, transforming specific argument values a nd output values.</p>
<p>IMPORTANT: The decorator will by default return a copy of the class. This might incur some run time overhead.
If this is desirable, for example, when you want to create several decorations of a same class.
If you want to change the class itself (e.g. you’re only loading it once in a module, and decorating it), then
specify _return_a_copy_of_the_class=False</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_return_a_copy_of_the_class</strong> – Specifies whether to
return a copy of the class (_return_a_copy_of_the_class=True, the default),
or change the actual loaded class itself (_return_a_copy_of_the_class=False)</p></li>
<li><p><strong>method_trans_spec</strong> – method_name=trans_specs_for_method pairs.
The trans_specs_for_method is a dict that is understood by transform_class_method_input_and_output.
Except for one special case, it’s keys are argument names and values are callables to call on those
arguments’ values.
The special case is method_output_trans. This specifies that the callable it points to should be called
on output of method. Here’s one recipe for outputs: If the output of a function is an iterable and you want
to apply a function trans to each element of the output, specify method_output_trans=lambda x: map(trans, x).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A wrapped class</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p>mk_method_trans_spec_from_methods_specs_dict: a utility to make method_trans_spec more easily</p></li>
<li><p>transform_class_method_input_and_output: The function that is called for every method we wrap.</p></li>
</ul>
</div>
<p>In the following, we will show two examples.
- The first is a toy example to demonstrate the basic functionality.
- The second demonstrates a more involved case, but is still a silly example.
- The third demonstrates more the type of application we’d use wrap_class_methods_input_and_output for in real life.</p>
<p># FIRST EXAMPLE
We make an Ops class that wraps Counter, allowing one to add items and show the counts of items added.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">UserDict</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">re</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Ops</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">counter</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">()</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">add_item</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">counter</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">item</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">counter</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Here&#39;s an example of what Ops does</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ops</span> <span class="o">=</span> <span class="n">Ops</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;this&#39;</span><span class="p">,</span> <span class="s1">&#39;is&#39;</span><span class="p">,</span> <span class="s1">&#39;that&#39;</span><span class="p">,</span> <span class="s1">&#39;and&#39;</span><span class="p">,</span> <span class="s1">&#39;that&#39;</span><span class="p">,</span> <span class="s1">&#39;is&#39;</span><span class="p">,</span> <span class="s1">&#39;this&#39;</span><span class="p">]:</span>
<span class="gp">... </span>    <span class="n">ops</span><span class="o">.</span><span class="n">add_item</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ops</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="go">Counter({&#39;this&#39;: 2, &#39;is&#39;: 2, &#39;that&#39;: 2, &#39;and&#39;: 1})</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># But say we don&#39;t want to count actual words added, but just the first two letters of these words,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># and say we want to show() to return the dict, not the Counter.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">NewOps</span> <span class="o">=</span> <span class="n">wrap_class_methods_input_and_output</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">_return_a_copy_of_the_class</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">add_item</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">item</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[:</span><span class="mi">2</span><span class="p">]),</span>  <span class="c1"># intercept items fed to add_item and keep only 2 first letters</span>
<span class="gp">... </span>    <span class="n">show</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">method_output_trans</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>  <span class="c1"># intercept output of show method, converting to dict</span>
<span class="gp">... </span><span class="p">)(</span><span class="n">Ops</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># let&#39;s try it out!</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ops</span> <span class="o">=</span> <span class="n">NewOps</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;this&#39;</span><span class="p">,</span> <span class="s1">&#39;is&#39;</span><span class="p">,</span> <span class="s1">&#39;that&#39;</span><span class="p">,</span> <span class="s1">&#39;and&#39;</span><span class="p">,</span> <span class="s1">&#39;that&#39;</span><span class="p">,</span> <span class="s1">&#39;is&#39;</span><span class="p">,</span> <span class="s1">&#39;this&#39;</span><span class="p">]:</span>
<span class="gp">... </span>    <span class="n">ops</span><span class="o">.</span><span class="n">add_item</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ops</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="go">{&#39;th&#39;: 4, &#39;is&#39;: 2, &#39;an&#39;: 1}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># See that we specified _return_a_copy_of_the_class=False?</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Now look at what happens if we try to use Ops, the original class, again. It behaves like NewOps.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># That&#39;s usually not the behavior we want, so be careful!</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ops</span> <span class="o">=</span> <span class="n">Ops</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;this&#39;</span><span class="p">,</span> <span class="s1">&#39;is&#39;</span><span class="p">,</span> <span class="s1">&#39;that&#39;</span><span class="p">,</span> <span class="s1">&#39;and&#39;</span><span class="p">,</span> <span class="s1">&#39;that&#39;</span><span class="p">,</span> <span class="s1">&#39;is&#39;</span><span class="p">,</span> <span class="s1">&#39;this&#39;</span><span class="p">]:</span>
<span class="gp">... </span>    <span class="n">ops</span><span class="o">.</span><span class="n">add_item</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ops</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="go">{&#39;th&#39;: 4, &#39;is&#39;: 2, &#39;an&#39;: 1}</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p># SECOND EXAMPLE</p>
<p>Wrap a dict (or rather, the safer collections.UserDict), doing weird things to the input and output
keys and values</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">val_in_trans</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s1">&#39;hello </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>  <span class="c1"># prepend &quot;hello &quot; to incoming values</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">val_out_trans</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="s1">&#39;hi&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>  <span class="c1"># replace &quot;hello&quot; by &quot;hi&quot; in output values</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">key_in_trans</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s1">&#39;__&#39;</span> <span class="o">+</span> <span class="n">x</span>  <span class="c1"># prepend incoming keys with double underscore</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">key_out_trans</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>  <span class="c1"># remove the first two characters (underscores) from keys when output</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">methods_specs_dict</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s1">&#39;__contains__&#39;</span><span class="p">,</span> <span class="s1">&#39;__getitem__&#39;</span><span class="p">,</span> <span class="s1">&#39;__setitem__&#39;</span><span class="p">,</span> <span class="s1">&#39;__delitem__&#39;</span><span class="p">):</span> <span class="nb">dict</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">key_in_trans</span><span class="p">),</span>
<span class="gp">... </span>    <span class="s1">&#39;__setitem__&#39;</span><span class="p">:</span> <span class="nb">dict</span><span class="p">(</span><span class="n">item</span><span class="o">=</span><span class="n">val_in_trans</span><span class="p">),</span>
<span class="gp">... </span>    <span class="s1">&#39;__iter__&#39;</span><span class="p">:</span> <span class="nb">dict</span><span class="p">(</span><span class="n">method_output_trans</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">map</span><span class="p">(</span><span class="n">key_out_trans</span><span class="p">,</span> <span class="n">x</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="s1">&#39;__getitem__&#39;</span><span class="p">:</span> <span class="nb">dict</span><span class="p">(</span><span class="n">method_output_trans</span><span class="o">=</span><span class="n">val_out_trans</span><span class="p">)</span>
<span class="gp">... </span><span class="p">}</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">methods_specs_dict</span> <span class="o">=</span> <span class="n">mk_method_trans_spec_from_methods_specs_dict</span><span class="p">(</span><span class="n">methods_specs_dict</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@wrap_class_methods_input_and_output</span><span class="p">(</span><span class="o">**</span><span class="n">methods_specs_dict</span><span class="p">)</span>
<span class="gp">... </span><span class="k">class</span> <span class="nc">AA</span><span class="p">(</span><span class="n">UserDict</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aa</span> <span class="o">=</span> <span class="n">AA</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aa</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;shoo&#39;</span>  <span class="c1"># store &#39;shoo&#39; under &#39;foo&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># the __str__ method isn&#39;t wrapped, so we see the actual STORED keys and values</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># we see that __foo, not foo is the actual key, and &quot;hello shoo&quot; the value:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">str</span><span class="p">(</span><span class="n">aa</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;{&#39;__foo&#39;: &#39;hello shoo&#39;}&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="s1">&#39;foo&#39;</span> <span class="ow">in</span> <span class="n">aa</span>  <span class="c1"># yet from the interface, it looks like &#39;foo&#39; is a key of aa...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="s1">&#39;__foo&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">aa</span>  <span class="c1"># ... and &#39;__foo&#39; is not a key.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aa</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;bar&#39;</span>  <span class="c1"># let&#39;s replace the value of &#39;foo&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">str</span><span class="p">(</span><span class="n">aa</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;{&#39;__foo&#39;: &#39;hello bar&#39;}&quot;</span>  <span class="c1"># see what&#39;s stored</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aa</span><span class="p">[</span><span class="s1">&#39;star&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;wars&#39;</span>  <span class="c1"># let&#39;s add another</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">aa</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;star&#39;</span><span class="p">]</span>  <span class="c1"># what are the keys? (this uses __iter__ under the hood)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># In the following, we&#39;ll use methods keys(), values(), and items(), none of which we wrapped.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># And yet, they work as expected, since they pass on their work to methods we wrapped.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">aa</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;star&#39;</span><span class="p">]</span>  <span class="c1"># another way to get keys</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># see here that when we ask for values, we don&#39;t get what we asked to store, ...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># ... nor what is actually stored, but something else</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">aa</span><span class="o">.</span><span class="n">values</span><span class="p">())</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;hi bar&#39;</span><span class="p">,</span> <span class="s1">&#39;hi wars&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">str</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">aa</span><span class="o">.</span><span class="n">items</span><span class="p">()))</span> <span class="o">==</span> <span class="s2">&quot;[(&#39;foo&#39;, &#39;hi bar&#39;), (&#39;star&#39;, &#39;hi wars&#39;)]&quot;</span>  <span class="c1"># the keys and values we get from items()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">str</span><span class="p">(</span><span class="n">aa</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;{&#39;__foo&#39;: &#39;hello bar&#39;, &#39;__star&#39;: &#39;hello wars&#39;}&quot;</span>  <span class="c1"># what is actually stored</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">aa</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">]</span>  <span class="c1"># testing deletion of a key</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">str</span><span class="p">(</span><span class="n">aa</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;{&#39;__star&#39;: &#39;hello wars&#39;}&quot;</span>  <span class="c1"># it worked!</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p># THIRD EXAMPLE</p>
<p>Here again, we’ll wrap UserDict. But instead of being silly, we’ll pretend we need to store waveforms
in binary format (so input values will have to be wrapped), but still retrieving these waveforms as lists
(so output values will have to be wrapped).
Additionally, we’ll pretend we’re working with wav files within some root directory, but don’t
want the root dir or the ‘.wav’ extension to appear in our keys. So we’ll have to wrap input and output keys.
Of course, this is just pretend. Don’t use this with real waveforms. It won’t work.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">root</span> <span class="o">=</span> <span class="s1">&#39;/ROOT/DIR/&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abs_path_of_rel_path</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">rel_path</span><span class="p">:</span> <span class="n">root</span> <span class="o">+</span> <span class="n">rel_path</span> <span class="o">+</span> <span class="s1">&#39;.wav&#39;</span>  <span class="c1"># transform a relative path to an absolute one</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rel_path_of_abs_path</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;.wav&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>  <span class="c1"># transform an absolute path to a relative one</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">list_to_bytes</span> <span class="o">=</span> <span class="nb">bytes</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bytes_to_list</span> <span class="o">=</span> <span class="nb">list</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">methods_specs_dict</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s1">&#39;__contains__&#39;</span><span class="p">,</span> <span class="s1">&#39;__getitem__&#39;</span><span class="p">,</span> <span class="s1">&#39;__setitem__&#39;</span><span class="p">,</span> <span class="s1">&#39;__delitem__&#39;</span><span class="p">):</span> <span class="nb">dict</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">abs_path_of_rel_path</span><span class="p">),</span>
<span class="gp">... </span>    <span class="s1">&#39;__setitem__&#39;</span><span class="p">:</span> <span class="nb">dict</span><span class="p">(</span><span class="n">item</span><span class="o">=</span><span class="n">list_to_bytes</span><span class="p">),</span>
<span class="gp">... </span>    <span class="s1">&#39;__iter__&#39;</span><span class="p">:</span> <span class="nb">dict</span><span class="p">(</span><span class="n">method_output_trans</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">map</span><span class="p">(</span><span class="n">rel_path_of_abs_path</span><span class="p">,</span> <span class="n">x</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="s1">&#39;__getitem__&#39;</span><span class="p">:</span> <span class="nb">dict</span><span class="p">(</span><span class="n">method_output_trans</span><span class="o">=</span><span class="n">bytes_to_list</span><span class="p">)</span>
<span class="gp">... </span><span class="p">}</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">methods_specs_dict</span> <span class="o">=</span> <span class="n">mk_method_trans_spec_from_methods_specs_dict</span><span class="p">(</span><span class="n">methods_specs_dict</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@wrap_class_methods_input_and_output</span><span class="p">(</span><span class="o">**</span><span class="n">methods_specs_dict</span><span class="p">)</span>
<span class="gp">... </span><span class="k">class</span> <span class="nc">Wf</span><span class="p">(</span><span class="n">UserDict</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">year</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">down</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span> <span class="o">=</span> <span class="n">Wf</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">year</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">wf</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;b&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">))</span>
<span class="go">{&#39;/ROOT/DIR/year.wav&#39;: &#39;\x02\x00\x01\t&#39;}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;year&#39;</span> <span class="ow">in</span> <span class="n">wf</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span><span class="p">[</span><span class="s1">&#39;down&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">down</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">wf</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;b&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">))</span>
<span class="go">{&#39;/ROOT/DIR/year.wav&#39;: &#39;\x02\x00\x01\t&#39;, &#39;/ROOT/DIR/down.wav&#39;: &#39;\x05\x04\x03\x02\x01&#39;}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">wf</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="go">[&#39;year&#39;, &#39;down&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">wf</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
<span class="go">[[2, 0, 1, 9], [5, 4, 3, 2, 1]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">wf</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
<span class="go">[(&#39;year&#39;, [2, 0, 1, 9]), (&#39;down&#39;, [5, 4, 3, 2, 1])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">wf</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">wf</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">wf</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">wf</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
<span class="go">[(&#39;down&#39;, [5, 4, 3, 2, 1])]</span>
</pre></div>
</div>
</dd></dl>

</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">i2</a></h1>








<h3>Navigation</h3>
<p><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../i2.html">i2</a></li>
<li class="toctree-l1"><a class="reference internal" href="base.html">i2.base</a></li>
<li class="toctree-l1"><a class="reference internal" href="chain_map.html">i2.chain_map</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">i2.deco</a></li>
<li class="toctree-l1"><a class="reference internal" href="doc_mint.html">i2.doc_mint</a></li>
<li class="toctree-l1"><a class="reference internal" href="errors.html">i2.errors</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">i2.examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/signature_calculus.html">i2.examples.signature_calculus</a></li>
<li class="toctree-l1"><a class="reference internal" href="footprints.html">i2.footprints</a></li>
<li class="toctree-l1"><a class="reference internal" href="io_trans.html">i2.io_trans</a></li>
<li class="toctree-l1"><a class="reference internal" href="itypes.html">i2.itypes</a></li>
<li class="toctree-l1"><a class="reference internal" href="key_path.html">i2.key_path</a></li>
<li class="toctree-l1"><a class="reference internal" href="routing_forest.html">i2.routing_forest</a></li>
<li class="toctree-l1"><a class="reference internal" href="scrap.html">i2.scrap</a></li>
<li class="toctree-l1"><a class="reference internal" href="scrap/scrap.html">i2.scrap.scrap</a></li>
<li class="toctree-l1"><a class="reference internal" href="scrap/simple_pymint.html">i2.scrap.simple_pymint</a></li>
<li class="toctree-l1"><a class="reference internal" href="signatures.html">i2.signatures</a></li>
<li class="toctree-l1"><a class="reference internal" href="switch_case_tree.html">i2.switch_case_tree</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests.html">i2.tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/footprints_test.html">i2.tests.footprints_test</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/objects_for_testing.html">i2.tests.objects_for_testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/signatures_test.html">i2.tests.signatures_test</a></li>
<li class="toctree-l1"><a class="reference internal" href="util.html">i2.util</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="chain_map.html" title="previous chapter">i2.chain_map</a></li>
      <li>Next: <a href="doc_mint.html" title="next chapter">i2.doc_mint</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;OtoSense 2020.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/module_docs/i2/deco.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>