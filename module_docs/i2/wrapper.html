

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>i2.wrapper &mdash; i2 0.1.56 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=4ae1632d" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=9d458db5"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../_static/toggleprompt.js?v=d7ede5d2"></script>
      <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="prev" title="i2.util" href="util.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            i2
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../i2.html">i2</a></li>
<li class="toctree-l1"><a class="reference internal" href="_deprecated.html">i2._deprecated</a></li>
<li class="toctree-l1"><a class="reference internal" href="base.html">i2.base</a></li>
<li class="toctree-l1"><a class="reference internal" href="castgraph.html">i2.castgraph</a></li>
<li class="toctree-l1"><a class="reference internal" href="chain_map.html">i2.chain_map</a></li>
<li class="toctree-l1"><a class="reference internal" href="deco.html">i2.deco</a></li>
<li class="toctree-l1"><a class="reference internal" href="doc_mint.html">i2.doc_mint</a></li>
<li class="toctree-l1"><a class="reference internal" href="errors.html">i2.errors</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">i2.examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/castgraph_examples.html">i2.examples.castgraph_examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/signature_calculus.html">i2.examples.signature_calculus</a></li>
<li class="toctree-l1"><a class="reference internal" href="footprints.html">i2.footprints</a></li>
<li class="toctree-l1"><a class="reference internal" href="io_trans.html">i2.io_trans</a></li>
<li class="toctree-l1"><a class="reference internal" href="itypes.html">i2.itypes</a></li>
<li class="toctree-l1"><a class="reference internal" href="key_path.html">i2.key_path</a></li>
<li class="toctree-l1"><a class="reference internal" href="multi_object.html">i2.multi_object</a></li>
<li class="toctree-l1"><a class="reference internal" href="routing_forest.html">i2.routing_forest</a></li>
<li class="toctree-l1"><a class="reference internal" href="scrap.html">i2.scrap</a></li>
<li class="toctree-l1"><a class="reference internal" href="scrap/scrap.html">i2.scrap.scrap</a></li>
<li class="toctree-l1"><a class="reference internal" href="scrap/scrap_ch_variadics.html">i2.scrap.scrap_ch_variadics</a></li>
<li class="toctree-l1"><a class="reference internal" href="scrap/scrap_kwargs.html">i2.scrap.scrap_kwargs</a></li>
<li class="toctree-l1"><a class="reference internal" href="scrap/signature_bops.html">i2.scrap.signature_bops</a></li>
<li class="toctree-l1"><a class="reference internal" href="scrap/simple_pymint.html">i2.scrap.simple_pymint</a></li>
<li class="toctree-l1"><a class="reference internal" href="scrap/switch_case_tree.html">i2.scrap.switch_case_tree</a></li>
<li class="toctree-l1"><a class="reference internal" href="signatures.html">i2.signatures</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests.html">i2.tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/footprints_test.html">i2.tests.footprints_test</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/objects_for_testing.html">i2.tests.objects_for_testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/test_castgraph.html">i2.tests.test_castgraph</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/test_signatures.html">i2.tests.test_signatures</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/test_util.html">i2.tests.test_util</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/test_wrapper.html">i2.tests.test_wrapper</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/util.html">i2.tests.util</a></li>
<li class="toctree-l1"><a class="reference internal" href="util.html">i2.util</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">i2.wrapper</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#i2.wrapper.CallerValidationError"><code class="docutils literal notranslate"><span class="pre">CallerValidationError</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#i2.wrapper.EgressValidationError"><code class="docutils literal notranslate"><span class="pre">EgressValidationError</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#i2.wrapper.Ingress"><code class="docutils literal notranslate"><span class="pre">Ingress</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#i2.wrapper.Ingress.name_map"><code class="docutils literal notranslate"><span class="pre">Ingress.name_map()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#i2.wrapper.Ingress.wrap"><code class="docutils literal notranslate"><span class="pre">Ingress.wrap()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#i2.wrapper.IngressValidationError"><code class="docutils literal notranslate"><span class="pre">IngressValidationError</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#i2.wrapper.InnerMapIngress"><code class="docutils literal notranslate"><span class="pre">InnerMapIngress</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#i2.wrapper.InnerMapIngress.from_signature"><code class="docutils literal notranslate"><span class="pre">InnerMapIngress.from_signature()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#i2.wrapper.MakeFromFunc"><code class="docutils literal notranslate"><span class="pre">MakeFromFunc</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#i2.wrapper.SmartDefault"><code class="docutils literal notranslate"><span class="pre">SmartDefault</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#i2.wrapper.SmartDefault.original_default"><code class="docutils literal notranslate"><span class="pre">SmartDefault.original_default</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#i2.wrapper.Wrap"><code class="docutils literal notranslate"><span class="pre">Wrap</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#i2.wrapper.WrapperValidationError"><code class="docutils literal notranslate"><span class="pre">WrapperValidationError</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#i2.wrapper.Wrapx"><code class="docutils literal notranslate"><span class="pre">Wrapx</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#i2.wrapper.append_empty_args"><code class="docutils literal notranslate"><span class="pre">append_empty_args()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#i2.wrapper.bind_funcs_object_attrs"><code class="docutils literal notranslate"><span class="pre">bind_funcs_object_attrs()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#i2.wrapper.bind_funcs_object_attrs_old"><code class="docutils literal notranslate"><span class="pre">bind_funcs_object_attrs_old()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#i2.wrapper.camelize"><code class="docutils literal notranslate"><span class="pre">camelize()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#i2.wrapper.complete_dict_applying_functions"><code class="docutils literal notranslate"><span class="pre">complete_dict_applying_functions()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#i2.wrapper.func_to_method_func"><code class="docutils literal notranslate"><span class="pre">func_to_method_func()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#i2.wrapper.identity"><code class="docutils literal notranslate"><span class="pre">identity()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#i2.wrapper.include_exclude_ingress_factory"><code class="docutils literal notranslate"><span class="pre">include_exclude_ingress_factory()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#i2.wrapper.items_with_mapped_keys"><code class="docutils literal notranslate"><span class="pre">items_with_mapped_keys()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#i2.wrapper.kwargs_trans"><code class="docutils literal notranslate"><span class="pre">kwargs_trans()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#i2.wrapper.move_names_to_the_end"><code class="docutils literal notranslate"><span class="pre">move_names_to_the_end()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#i2.wrapper.move_params_to_the_end"><code class="docutils literal notranslate"><span class="pre">move_params_to_the_end()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#i2.wrapper.partialx"><code class="docutils literal notranslate"><span class="pre">partialx()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#i2.wrapper.transparent_egress"><code class="docutils literal notranslate"><span class="pre">transparent_egress()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#i2.wrapper.transparent_ingress"><code class="docutils literal notranslate"><span class="pre">transparent_ingress()</span></code></a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">i2</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">i2.wrapper</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/module_docs/i2/wrapper.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-i2.wrapper">
<span id="i2-wrapper"></span><h1>i2.wrapper<a class="headerlink" href="#module-i2.wrapper" title="Link to this heading"></a></h1>
<p>A wrapper object and tools to work with it</p>
<p>How the <code class="docutils literal notranslate"><span class="pre">Wrap</span></code> class works:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>      *outer_args, **outer_kwargs
                 │
                 ▼
┌───────────────────────────────────┐
│              ingress              │
└───────────────────────────────────┘
                 │
                 ▼
      *inner_args, **inner_kwargs
                 │
                 ▼
┌───────────────────────────────────┐
│               func                │
└───────────────────────────────────┘
                 │
                 ▼
             func_output
                 │
                 ▼
┌───────────────────────────────────┐
│              egress               │
└───────────────────────────────────┘
                 │
                 ▼
            final_output
</pre></div>
</div>
<p>How the <code class="docutils literal notranslate"><span class="pre">Ingress</span></code> class (ingress templated function maker) works:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>      *outer_args, **outer_kwargs
                 │
                 ▼
┌───────────────────────────────────┐
│          outer_sig_bind           │
└───────────────────────────────────┘
                 │
                 ▼
          outer_all_kwargs
                 │
                 ▼
┌───────────────────────────────────┐
│            kwargs_trans           │
└───────────────────────────────────┘
                 │
                 ▼
          inner_all_kwargs
                 │
                 ▼
┌───────────────────────────────────┐
│          inner_sig_bind           │
└───────────────────────────────────┘
                 │
                 ▼
      *inner_args, **inner_kwargs
</pre></div>
</div>
<dl class="py exception">
<dt class="sig sig-object py" id="i2.wrapper.CallerValidationError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">i2.wrapper.</span></span><span class="sig-name descname"><span class="pre">CallerValidationError</span></span><a class="reference internal" href="../../_modules/i2/wrapper.html#CallerValidationError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.wrapper.CallerValidationError" title="Link to this definition"></a></dt>
<dd><p>Raised when a caller is not valid</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="i2.wrapper.EgressValidationError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">i2.wrapper.</span></span><span class="sig-name descname"><span class="pre">EgressValidationError</span></span><a class="reference internal" href="../../_modules/i2/wrapper.html#EgressValidationError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.wrapper.EgressValidationError" title="Link to this definition"></a></dt>
<dd><p>Raised when a egress is not valid</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="i2.wrapper.Ingress">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">i2.wrapper.</span></span><span class="sig-name descname"><span class="pre">Ingress</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inner_sig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kwargs_trans</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outer_sig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_excess</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">apply_defaults</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_partial</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/wrapper.html#Ingress"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.wrapper.Ingress" title="Link to this definition"></a></dt>
<dd><p>The Ingress class offers a template for creating ingress classes.</p>
<p>Note that when writing a decorator with <code class="docutils literal notranslate"><span class="pre">i2.wrapper</span></code>, you’re usually better off
writing an ingress function for the purpose. As a result, your code will usually
be less complex, easier to read, and more efficient than using the Ingress class.</p>
<p>So why use the <code class="docutils literal notranslate"><span class="pre">Ingress</span></code> class at all? For one, because it’ll take care of some
common mechanics for you, so once you understand how to use it, you’ll probably
create a correct wrapper faster.</p>
<p>Further, if you’re writing a general wrapping tool (e.g. your own currying machine,
some rule-based input casting function, etc.) then you’ll find that using
Ingres will usually with on the complexity, readability and/or efficiency front.</p>
<p>Consider the following function:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="o">/</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;(w:=</span><span class="si">{</span><span class="n">w</span><span class="si">}</span><span class="s2">) + (x:=</span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">) * (y:=</span><span class="si">{</span><span class="n">y</span><span class="si">}</span><span class="s2">) ** (z:=</span><span class="si">{</span><span class="n">z</span><span class="si">}</span><span class="s2">) == </span><span class="si">{</span><span class="n">w</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">**</span><span class="w"> </span><span class="n">z</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">&#39;(w:=0) + (x:=1) * (y:=2) ** (z:=3) == 8&#39;</span>
</pre></div>
</div>
<p>Let’s say you wanted to dispatch this function to a command line interface,
or a webservice where all arguments are taken from the url.
The problem here is that this means that all incoming values will be strings
in that case.
Say you wanted all input values to be cast to ints. In that case you could do:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">i2.wrapper</span><span class="w"> </span><span class="kn">import</span> <span class="n">Ingress</span><span class="p">,</span> <span class="n">wrap</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">inspect</span><span class="w"> </span><span class="kn">import</span> <span class="n">signature</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trans_all_vals_to_ints</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cli_f</span> <span class="o">=</span> <span class="n">wrap</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">f</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">ingress</span><span class="o">=</span><span class="n">Ingress</span><span class="p">(</span><span class="n">signature</span><span class="p">(</span><span class="n">f</span><span class="p">),</span> <span class="n">kwargs_trans</span><span class="o">=</span><span class="n">trans_all_vals_to_ints</span><span class="p">)</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cli_f</span><span class="p">(</span><span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="s2">&quot;4&quot;</span><span class="p">)</span>
<span class="go">&#39;(w:=2) + (x:=3) * (y:=4) ** (z:=3) == 194&#39;</span>
</pre></div>
</div>
<p>In a more realistic situation, you’d want to have more control over this value
transformation.</p>
<p>Say you wanted to convert to int if it’s possible, try float if not,
and just leave the string alone otherwise.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">_try_casting_to_numeric</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
<span class="gp">... </span>            <span class="k">return</span> <span class="n">x</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">cast_numbers</span><span class="p">(</span><span class="n">d</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">_try_casting_to_numeric</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cli_f</span> <span class="o">=</span> <span class="n">wrap</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">ingress</span><span class="o">=</span><span class="n">Ingress</span><span class="p">(</span><span class="n">signature</span><span class="p">(</span><span class="n">f</span><span class="p">),</span> <span class="n">kwargs_trans</span><span class="o">=</span><span class="n">cast_numbers</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cli_f</span><span class="p">(</span><span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="s2">&quot;3.14&quot;</span><span class="p">,</span> <span class="s2">&quot;4&quot;</span><span class="p">)</span>
<span class="go">&#39;(w:=2) + (x:=3.14) * (y:=4) ** (z:=3) == 202.96&#39;</span>
</pre></div>
</div>
<p>Let’s say that our values transformations are not all 1-to-1 as in the examples
above.
Instead, they can be</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">1-to-many</span></code> (e.g. the outer <code class="docutils literal notranslate"><span class="pre">w</span></code> is used to compute the inner <code class="docutils literal notranslate"><span class="pre">w</span></code> and <code class="docutils literal notranslate"><span class="pre">x</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">many-to-1</span></code> (e.g. the outer <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> are used to compute inner <code class="docutils literal notranslate"><span class="pre">y</span></code>)</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">w</span>   <span class="n">x</span>   <span class="n">y</span>   <span class="n">z</span>
 <span class="o">/</span> \   \ <span class="o">/</span>    <span class="o">|</span>
<span class="n">w</span>   <span class="n">x</span>   <span class="n">y</span>     <span class="n">z</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">kwargs_trans</span><span class="p">(</span><span class="n">outer_kw</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span>
<span class="gp">... </span>        <span class="c1"># e.g. 1-to-many: one outer arg (w) producing two inner args (w, and y)</span>
<span class="gp">... </span>        <span class="n">w</span><span class="o">=</span><span class="n">outer_kw</span><span class="p">[</span><span class="s1">&#39;w&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">x</span><span class="o">=</span><span class="n">outer_kw</span><span class="p">[</span><span class="s1">&#39;w&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">3</span><span class="p">,</span>
<span class="gp">... </span>        <span class="c1"># e.g. many-to-1: two outer args (x and y) producing one inner arg (y)</span>
<span class="gp">... </span>        <span class="n">y</span><span class="o">=</span><span class="n">outer_kw</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">outer_kw</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">],</span>
<span class="gp">... </span>        <span class="c1"># Note that no z is mentioned: This means we&#39;re just leaving it alone</span>
<span class="gp">... </span>    <span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ingress</span> <span class="o">=</span> <span class="n">Ingress</span><span class="p">(</span><span class="n">signature</span><span class="p">(</span><span class="n">f</span><span class="p">),</span> <span class="n">kwargs_trans</span><span class="o">=</span><span class="n">kwargs_trans</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">ingress</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span> <span class="o">==</span> <span class="p">((</span><span class="mi">4</span><span class="p">,),</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wrapped_f</span> <span class="o">=</span> <span class="n">wrap</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">ingress</span><span class="o">=</span><span class="n">ingress</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">wrapped_f</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;(w:=4) + (x:=6) * (y:=7) ** (z:=3) == 2062&#39;</span>
</pre></div>
</div>
<p>The following is an example that involves several aspects of the <code class="docutils literal notranslate"><span class="pre">Ingress</span></code> class.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">i2</span><span class="w"> </span><span class="kn">import</span> <span class="n">Sig</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">kwargs_trans</span><span class="p">(</span><span class="n">outer_kw</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">w</span><span class="o">=</span><span class="n">outer_kw</span><span class="p">[</span><span class="s1">&#39;w&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">x</span><span class="o">=</span><span class="n">outer_kw</span><span class="p">[</span><span class="s1">&#39;w&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">3</span><span class="p">,</span>
<span class="gp">... </span>        <span class="c1"># need to pop you (inner func has no you argument)</span>
<span class="gp">... </span>        <span class="n">y</span><span class="o">=</span><span class="n">outer_kw</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">outer_kw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;you&#39;</span><span class="p">),</span>
<span class="gp">... </span>        <span class="c1"># Note that no z is mentioned: This means we&#39;re just leaving it alone</span>
<span class="gp">... </span>    <span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ingress</span> <span class="o">=</span> <span class="n">Ingress</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">inner_sig</span><span class="o">=</span><span class="n">signature</span><span class="p">(</span><span class="n">f</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">kwargs_trans</span><span class="o">=</span><span class="n">kwargs_trans</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">outer_sig</span><span class="o">=</span><span class="n">Sig</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="o">.</span><span class="n">ch_names</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="s1">&#39;you&#39;</span><span class="p">)</span>  <span class="c1"># need to give the outer sig a you</span>
<span class="gp">... </span>    <span class="c1"># You could also express it this way (though you&#39;d lose the annotations)</span>
<span class="gp">... </span>    <span class="c1"># outer_sig=lambda w, /, x, you=2, *, z=3: None</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">ingress</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">you</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span> <span class="o">==</span> <span class="p">((</span><span class="mi">4</span><span class="p">,),</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wrapped_f</span> <span class="o">=</span> <span class="n">wrap</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">ingress</span><span class="o">=</span><span class="n">ingress</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">wrapped_f</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">you</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;(w:=4) + (x:=6) * (y:=7) ** (z:=3) == 2062&#39;</span>
</pre></div>
</div>
<p>A convenience method allows to do the same with the ingress instance itself:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">wrapped_f</span> <span class="o">=</span> <span class="n">ingress</span><span class="o">.</span><span class="n">wrap</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">wrapped_f</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">you</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;(w:=4) + (x:=6) * (y:=7) ** (z:=3) == 2062&#39;</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="i2.wrapper.Ingress.name_map">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">name_map</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wrapped</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">old_to_new_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/wrapper.html#Ingress.name_map"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.wrapper.Ingress.name_map" title="Link to this definition"></a></dt>
<dd><p>Change argument names.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="o">/</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;(w:=</span><span class="si">{</span><span class="n">w</span><span class="si">}</span><span class="s2">) + (x:=</span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">) * (y:=</span><span class="si">{</span><span class="n">y</span><span class="si">}</span><span class="s2">) ** (z:=</span><span class="si">{</span><span class="n">z</span><span class="si">}</span><span class="s2">) == </span><span class="si">{</span><span class="n">w</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">**</span><span class="w"> </span><span class="n">z</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ingress</span> <span class="o">=</span> <span class="n">Ingress</span><span class="o">.</span><span class="n">name_map</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="s1">&#39;DoubleYou&#39;</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="s1">&#39;Zee&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ingress</span>
<span class="go">Ingress signature: (DoubleYou, /, x: float, y=2, *, Zee: int = 3)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wrapped_f</span> <span class="o">=</span> <span class="n">ingress</span><span class="o">.</span><span class="n">wrap</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wrapped_f</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">Zee</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="go">&#39;(w:=1) + (x:=2) * (y:=3) ** (z:=4) == 163&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="i2.wrapper.Ingress.wrap">
<span class="sig-name descname"><span class="pre">wrap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">egress</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#i2.wrapper.Wrap" title="i2.wrapper.Wrap"><span class="pre">Wrap</span></a></span></span><a class="reference internal" href="../../_modules/i2/wrapper.html#Ingress.wrap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.wrapper.Ingress.wrap" title="Link to this definition"></a></dt>
<dd><p>Convenience method to wrap a function with the instance ingress.
<code class="docutils literal notranslate"><span class="pre">ingress.wrap(func,...)</span></code> equivalent to <code class="docutils literal notranslate"><span class="pre">Wrap(func,</span> <span class="pre">ingress,</span> <span class="pre">...)</span></code></p>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="i2.wrapper.IngressValidationError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">i2.wrapper.</span></span><span class="sig-name descname"><span class="pre">IngressValidationError</span></span><a class="reference internal" href="../../_modules/i2/wrapper.html#IngressValidationError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.wrapper.IngressValidationError" title="Link to this definition"></a></dt>
<dd><p>Raised when a ingress is not valid</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="i2.wrapper.InnerMapIngress">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">i2.wrapper.</span></span><span class="sig-name descname"><span class="pre">InnerMapIngress</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inner_sig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kwargs_trans</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_allow_reordering</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">changes_for_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/wrapper.html#InnerMapIngress"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.wrapper.InnerMapIngress" title="Link to this definition"></a></dt>
<dd><p>A class to help build ingresses systematically by mapping the inner signature.</p>
<p><em>Systematically</em>, i.e. “according to a fixed plan/system” is what it’s about here.
As we’ll see below, if you need to write a particular adapter for a specific case,
you probably should do by writing an actual ingress function directly.
In cases where you might want to apply a same logic to wrap many functions,
you may want to fix that wrapping logic: <code class="docutils literal notranslate"><span class="pre">InnerMapIngress</span></code> provides one
way to do this.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inner_sig</strong> – The signature of the wrapped function.</p></li>
<li><p><strong>kwargs_trans</strong> – A dict-to-dict transformation of the outer kwargs to
the kwargs that should be input to the inner function.
That is <code class="docutils literal notranslate"><span class="pre">kwargs_trans</span></code> is <code class="docutils literal notranslate"><span class="pre">outer_kwargs</span> <span class="pre">-&gt;</span> <span class="pre">inner_kwargs</span></code>.
Note that though both outer and inner signatures could have those annoying
position-only kinds, you don’t have to think of that.
The parameter kind restrictions are taken care of automatically.</p></li>
<li><p><strong>_allow_reordering</strong> – Whether we want to allow reordering of variables</p></li>
<li><p><strong>in_to_out_sig_changes</strong> – The <code class="docutils literal notranslate"><span class="pre">inner_name=dict_of_changes_for_that_name</span></code></p></li>
</ul>
</dd>
</dl>
<p>pairs, the <code class="docutils literal notranslate"><span class="pre">dict_of_changes_for_that_name</span></code> is a <code class="docutils literal notranslate"><span class="pre">dict</span></code> with keys being valid
<code class="docutils literal notranslate"><span class="pre">inspect.Parameter</span></code></p>
<p>Consider the following function that has a position only, a keyword only,
two arguments with annotations, and three with a default.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="o">/</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">w</span> <span class="o">+</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span> <span class="o">**</span> <span class="n">z</span>
</pre></div>
</div>
<p>Say we wanted a version of this function</p>
<ul class="simple">
<li><p>that didn’t have the argument kind restrinctions (all POSITION_OR_KEYWORD),</p></li>
<li><p>where the annotation of <code class="docutils literal notranslate"><span class="pre">x</span></code> was changed <code class="docutils literal notranslate"><span class="pre">int</span></code> and the default removed</p></li>
<li><p>where <code class="docutils literal notranslate"><span class="pre">y</span></code> was named <code class="docutils literal notranslate"><span class="pre">you</span></code> instead, and has an annotation (<code class="docutils literal notranslate"><span class="pre">int</span></code>).</p></li>
<li><dl class="simple">
<dt>where the default of <code class="docutils literal notranslate"><span class="pre">z</span></code> was <code class="docutils literal notranslate"><span class="pre">10</span></code> instead of <code class="docutils literal notranslate"><span class="pre">3</span></code>, and doesn’t have an</dt><dd><p>annotation.</p>
</dd>
</dl>
</li>
</ul>
<p>In order to get a version of this function we wanted (more lenient kinds,
with some annotations and a default change), we can use the ingress function:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">directly_defined_ingress</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">you</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="mi">10</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="p">(</span><span class="n">w</span><span class="p">,),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">you</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="n">z</span><span class="p">)</span>
</pre></div>
</div>
<p>When we need to wrap a specific function in a specific way, defining an
ingress function  this way is usually the simplest way.
But in some cases we need to build the ingress function using some predefined
rule/protocol to make applying the rule/protocol systematic.</p>
<p>For those cases, <code class="docutils literal notranslate"><span class="pre">InnerMapIngress</span></code> comes in handy.</p>
<p>With <code class="docutils literal notranslate"><span class="pre">InnerMapIngress</span></code> we’d build our ingress function like this:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">inspect</span><span class="w"> </span><span class="kn">import</span> <span class="n">Parameter</span><span class="p">,</span> <span class="n">signature</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PK</span> <span class="o">=</span> <span class="n">Parameter</span><span class="o">.</span><span class="n">POSITIONAL_OR_KEYWORD</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">empty</span> <span class="o">=</span> <span class="n">Parameter</span><span class="o">.</span><span class="n">empty</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ingress</span> <span class="o">=</span> <span class="n">InnerMapIngress</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">f</span><span class="p">,</span>
<span class="gp">... </span>    <span class="c1"># change kind to PK:</span>
<span class="gp">... </span>    <span class="n">w</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="n">PK</span><span class="p">),</span>
<span class="gp">... </span>    <span class="c1"># change annotation of x from float to int and remove default</span>
<span class="gp">... </span>    <span class="n">x</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">annotation</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">empty</span><span class="p">),</span>
<span class="gp">... </span>    <span class="c1"># rename y to you and add annotation int:</span>
<span class="gp">... </span>    <span class="n">y</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;you&#39;</span><span class="p">,</span> <span class="n">annotation</span><span class="o">=</span><span class="nb">int</span><span class="p">),</span>
<span class="gp">... </span>    <span class="c1"># change kind to PK, default to 10, and remove annotation:</span>
<span class="gp">... </span>    <span class="n">z</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="n">PK</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">annotation</span><span class="o">=</span><span class="n">empty</span><span class="p">),</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<p>Note:</p>
<ul class="simple">
<li><dl class="simple">
<dt>Only the changes we wish to make to the parameters are mentioned.</dt><dd><p>You could also define the parameters explicitly by simply listing all three
of the dimensions (kind, annotation, and default)</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Three? But a <code class="docutils literal notranslate"><span class="pre">Parameter</span></code> object has four; what about the name?</dt><dd><p>Indeed, you can use name as well, more on that later.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Note that in order to specify that you want no default, or no annotation,</dt><dd><p>you cannot use <code class="docutils literal notranslate"><span class="pre">None</span></code> since <code class="docutils literal notranslate"><span class="pre">None</span></code> is both a valid default and a valid
annotation; So instead you need to use <code class="docutils literal notranslate"><span class="pre">Parameter.empty</span></code> (conveniently
assigned to a constant named <code class="docutils literal notranslate"><span class="pre">empty</span></code> in the <code class="docutils literal notranslate"><span class="pre">wrapping</span></code> module.</p>
</dd>
</dl>
</li>
</ul>
<p>Now see that all arguments are <code class="docutils literal notranslate"><span class="pre">POSITIONAL_OR_KEYWORD</span></code>, <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> are
<code class="docutils literal notranslate"><span class="pre">int</span></code>, and default of <code class="docutils literal notranslate"><span class="pre">z</span></code> is 10:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="p">(</span>
<span class="gp">... </span>    <span class="nb">str</span><span class="p">(</span><span class="n">signature</span><span class="p">(</span><span class="n">ingress</span><span class="p">))</span>
<span class="gp">... </span>    <span class="o">==</span> <span class="nb">str</span><span class="p">(</span><span class="n">signature</span><span class="p">(</span><span class="n">directly_defined_ingress</span><span class="p">))</span>
<span class="gp">... </span>    <span class="o">==</span> <span class="s1">&#39;(w, x: int, you: int = 2, z=10)&#39;</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<p>Additionally, <code class="docutils literal notranslate"><span class="pre">ingress</span></code> function does it’s job of dispatching the right args
and kwargs to the target function:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="p">(</span>
<span class="gp">... </span>    <span class="n">ingress</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">... </span>    <span class="o">==</span> <span class="n">directly_defined_ingress</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">... </span>    <span class="o">==</span> <span class="p">((</span><span class="mi">0</span><span class="p">,),</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="i2.wrapper.InnerMapIngress.from_signature">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_signature</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inner_sig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outer_sig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_allow_reordering</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/wrapper.html#InnerMapIngress.from_signature"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.wrapper.InnerMapIngress.from_signature" title="Link to this definition"></a></dt>
<dd><p>A convienience ingress constructor to specify wrappings that affect arguments
independently.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>inner_sig</strong> – The signature of wrapped, inner function (or the inner</p>
</dd>
</dl>
<p>function itself)
:param outer_sig: The desired outer signature. Can also use a function (will
only take it’s signature though).
:param _allow_reordering: Whether to allow <code class="docutils literal notranslate"><span class="pre">outer_sig</span></code> to reorder arguments.
:return: An ingress that will allow one to use a function having the
<code class="docutils literal notranslate"><span class="pre">inner_sig</span></code> signature to</p>
<p>Say we wanted to get a version of the function:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="o">/</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">w</span> <span class="o">+</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span> <span class="o">**</span> <span class="n">z</span>
</pre></div>
</div>
<p>That was equivalent to (note the kind, default and annotation differences):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">g</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">2.0</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">w</span> <span class="o">+</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span> <span class="o">**</span> <span class="n">z</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">h</span> <span class="o">=</span> <span class="n">wrap</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">ingress</span><span class="o">=</span><span class="n">InnerMapIngress</span><span class="o">.</span><span class="n">from_signature</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">g</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Sig</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
<span class="go">&lt;Sig (w, x=1, y: float = 2.0, z=10)&gt;</span>
</pre></div>
</div>
<p>Note we could have used <code class="docutils literal notranslate"><span class="pre">...from_signature(Sig(f),</span> <span class="pre">Sig(g))</span></code> as well,
since the method doesn’t use the actual functions, just their signatures.</p>
<p>So we’ve seen that <code class="docutils literal notranslate"><span class="pre">h</span></code> takes on the signature (kind, defaults,
and annotations) of <code class="docutils literal notranslate"><span class="pre">g</span></code>.
Let’s see now that <code class="docutils literal notranslate"><span class="pre">h</span></code> actually computes, uses the defaults of <code class="docutils literal notranslate"><span class="pre">g</span></code> and
can doesn’t have the position only restriction on <code class="docutils literal notranslate"><span class="pre">w</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">h</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="n">g</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1024</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">**</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">h</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="n">g</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2049</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">**</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">h</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span> <span class="o">==</span> <span class="n">g</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">**</span> <span class="mi">4</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">h</span><span class="p">(</span><span class="n">w</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">z</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span> <span class="o">==</span> <span class="n">g</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">**</span> <span class="mi">4</span>  <span class="c1"># w keyword arg!</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="i2.wrapper.MakeFromFunc">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">i2.wrapper.</span></span><span class="sig-name descname"><span class="pre">MakeFromFunc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func_to_obj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/wrapper.html#MakeFromFunc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.wrapper.MakeFromFunc" title="Link to this definition"></a></dt>
<dd><p>Used to indicate that an object should be made as a function of an input func</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="i2.wrapper.SmartDefault">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">i2.wrapper.</span></span><span class="sig-name descname"><span class="pre">SmartDefault</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func_computing_default</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">original_default</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/wrapper.html#SmartDefault"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.wrapper.SmartDefault" title="Link to this definition"></a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="i2.wrapper.SmartDefault.original_default">
<span class="sig-name descname"><span class="pre">original_default</span></span><a class="headerlink" href="#i2.wrapper.SmartDefault.original_default" title="Link to this definition"></a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">_empty</span></code></p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="i2.wrapper.Wrap">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">i2.wrapper.</span></span><span class="sig-name descname"><span class="pre">Wrap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ingress</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">egress</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/wrapper.html#Wrap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.wrapper.Wrap" title="Link to this definition"></a></dt>
<dd><p>A function wrapper with interface modifiers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> – The wrapped function</p></li>
<li><p><strong>ingress</strong> – The incoming data transformer. It determines the argument properties
(name, kind, default and annotation) as well as the actual input of the
wrapped function.</p></li>
<li><p><strong>egress</strong> – The outgoing data transformer. It also takes precedence over the
wrapped function to determine the return annotation of the <code class="docutils literal notranslate"><span class="pre">Wrap</span></code> instance</p></li>
<li><p><strong>name</strong> – Name to give the wrapper (will use wrapped func name by default)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A callable instance wrapping <code class="docutils literal notranslate"><span class="pre">func</span></code></p>
</dd>
</dl>
<p>Some examples:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">inspect</span><span class="w"> </span><span class="kn">import</span> <span class="n">signature</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">i2</span><span class="w"> </span><span class="kn">import</span> <span class="n">Sig</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">func</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">wrapped_func</span> <span class="o">=</span> <span class="n">wrap</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>  <span class="c1"># no transformations: wrapped_func is the same as func</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">wrapped_func</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Hi&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">func</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Hi&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;HiHi&#39;</span>
</pre></div>
</div>
<p>Modifying the first argument</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">ingress</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="gp">... </span>  <span class="k">return</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">),</span> <span class="nb">dict</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wrapped_func</span> <span class="o">=</span> <span class="n">wrap</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">ingress</span><span class="o">=</span><span class="n">ingress</span><span class="p">)</span>  <span class="c1"># first variable is now multiplied by 2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wrapped_func</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Hi&#39;</span><span class="p">)</span>
<span class="go">&#39;HiHiHiHi&#39;</span>
</pre></div>
</div>
<p>Same using keyword args, we need to use tuple to represent an empty tuple</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">ingress</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="gp">... </span>  <span class="k">return</span> <span class="nb">tuple</span><span class="p">(),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">2</span> <span class="o">*</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="n">b</span><span class="p">)</span> <span class="c1"># Note that b MUST be present as well, or an error will be raised</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wrapped_func</span> <span class="o">=</span> <span class="n">wrap</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">ingress</span><span class="o">=</span><span class="n">ingress</span><span class="p">)</span>  <span class="c1"># first variable is now multiplied by 2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wrapped_func</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Hi&#39;</span><span class="p">)</span>
<span class="go">&#39;HiHiHiHi&#39;</span>
</pre></div>
</div>
<p>Using both args and kwargs</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">ingress</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="gp">... </span>  <span class="k">return</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">a</span><span class="p">,</span> <span class="p">),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">b</span><span class="o">=</span><span class="n">b</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wrapped_func</span> <span class="o">=</span> <span class="n">wrap</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">ingress</span><span class="o">=</span><span class="n">ingress</span><span class="p">)</span>  <span class="c1"># first variable is now multiplied by 2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wrapped_func</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Hi&#39;</span><span class="p">)</span>
<span class="go">&#39;HiHiHiHi&#39;</span>
</pre></div>
</div>
<p>We can use ingress to ADD parameters to func</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">ingress</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
<span class="gp">... </span>  <span class="k">return</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">+</span> <span class="n">c</span><span class="p">),</span> <span class="nb">dict</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wrapped_func</span> <span class="o">=</span> <span class="n">wrap</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">ingress</span><span class="o">=</span><span class="n">ingress</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># now wrapped_func takes three arguments</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wrapped_func</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Hi&#39;</span><span class="p">,</span> <span class="s1">&#39;world!&#39;</span><span class="p">)</span>
<span class="go">&#39;Hiworld!Hiworld!&#39;</span>
</pre></div>
</div>
<p>Egress is a bit more straightforward, it simply applies to the output of the
wrapped function. We can use ingress to ADD parameters to func</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">egress</span><span class="p">(</span><span class="n">output</span><span class="p">):</span>
<span class="gp">... </span>  <span class="k">return</span> <span class="n">output</span> <span class="o">+</span> <span class="s1">&#39; ITSME!!!&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wrapped_func</span> <span class="o">=</span> <span class="n">wrap</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">ingress</span><span class="o">=</span><span class="n">ingress</span><span class="p">,</span> <span class="n">egress</span><span class="o">=</span><span class="n">egress</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># now wrapped_func takes three arguments</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wrapped_func</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Hi&#39;</span><span class="p">,</span> <span class="s1">&#39;world!&#39;</span><span class="p">)</span>
<span class="go">&#39;Hiworld!Hiworld! ITSME!!!&#39;</span>
</pre></div>
</div>
<p>A more involved example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">ingress</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s2">&quot;hi&quot;</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span><span class="p">,),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">c</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">func</span><span class="p">(</span><span class="n">times</span><span class="p">,</span> <span class="n">string</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">times</span> <span class="o">*</span> <span class="n">string</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wrapped_func</span> <span class="o">=</span> <span class="n">wrap</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">ingress</span><span class="o">=</span><span class="n">ingress</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">wrapped_func</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;world! &quot;</span><span class="p">,</span> <span class="s2">&quot;Hi&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;Hi world! Hi world! Hi world! &quot;</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wrapped_func</span> <span class="o">=</span> <span class="n">wrap</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">egress</span><span class="o">=</span><span class="nb">len</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">wrapped_func</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;co&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="s2">&quot;coco&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">func</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;co&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wrapped_func</span> <span class="o">=</span> <span class="n">wrap</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">ingress</span><span class="o">=</span><span class="n">ingress</span><span class="p">,</span> <span class="n">egress</span><span class="o">=</span><span class="nb">len</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="p">(</span>
<span class="gp">... </span>    <span class="n">wrapped_func</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;world! &quot;</span><span class="p">,</span> <span class="s2">&quot;Hi&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="o">==</span> <span class="mi">30</span>
<span class="gp">... </span>    <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="s2">&quot;Hi world! Hi world! Hi world! &quot;</span><span class="p">)</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<p>An <code class="docutils literal notranslate"><span class="pre">ingress</span></code> function links the interface of the wrapper to the interface of the
wrapped func; therefore it’s definition often depends on information of both,
and for that reason, we provide the ability to specify the ingress not only
explicitly (as in the examples above), but through a factory – a function that
will be called on <code class="docutils literal notranslate"><span class="pre">func</span></code> to produce the ingress that should be used to wrap it.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="docutils literal notranslate"><span class="pre">wrap</span></code> function.</p>
</div>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="i2.wrapper.WrapperValidationError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">i2.wrapper.</span></span><span class="sig-name descname"><span class="pre">WrapperValidationError</span></span><a class="reference internal" href="../../_modules/i2/wrapper.html#WrapperValidationError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.wrapper.WrapperValidationError" title="Link to this definition"></a></dt>
<dd><p>Raised when wrapper some construction params are not valid</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="i2.wrapper.Wrapx">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">i2.wrapper.</span></span><span class="sig-name descname"><span class="pre">Wrapx</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ingress</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">egress</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">caller</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/wrapper.html#Wrapx"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.wrapper.Wrapx" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="i2.wrapper.append_empty_args">
<span class="sig-prename descclassname"><span class="pre">i2.wrapper.</span></span><span class="sig-name descname"><span class="pre">append_empty_args</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/wrapper.html#append_empty_args"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.wrapper.append_empty_args" title="Link to this definition"></a></dt>
<dd><p>To use to transform an ingress function that only returns kwargs to one that
returns the normal form of ingress functions: ((), kwargs)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="i2.wrapper.bind_funcs_object_attrs">
<span class="sig-prename descclassname"><span class="pre">i2.wrapper.</span></span><span class="sig-name descname"><span class="pre">bind_funcs_object_attrs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">funcs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">init_params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cls</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">module</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra_attrs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/wrapper.html#bind_funcs_object_attrs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.wrapper.bind_funcs_object_attrs" title="Link to this definition"></a></dt>
<dd><p>Transform one or several functions into a class that contains them as methods
sourcing specific arguments from the instance’s attributes.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">inspect</span><span class="w"> </span><span class="kn">import</span> <span class="n">signature</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">foo</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">d</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">c</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foo</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">&#39;bar: 6&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Klass</span> <span class="o">=</span> <span class="n">bind_funcs_object_attrs</span><span class="p">(</span><span class="n">foo</span><span class="p">,</span> <span class="n">init_params</span><span class="o">=</span><span class="s1">&#39;a c&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Klass</span><span class="o">.</span><span class="vm">__name__</span>
<span class="go">&#39;Foo&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">Klass</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">instance</span><span class="o">.</span><span class="n">foo</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;hello: 9&#39;</span> <span class="o">==</span> <span class="n">foo</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">signature</span><span class="p">(</span><span class="n">Klass</span><span class="p">))</span>
<span class="go">&#39;(a, c=2) -&gt; None&#39;</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">Klass</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span>
<span class="go">&#39;Foo(a=1, c=3)&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">signature</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">foo</span><span class="p">))</span>
<span class="go">&quot;(b, *, d=&#39;bar&#39;)&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span><span class="o">.</span><span class="n">foo</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
<span class="go">&#39;hello: 9&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span><span class="o">.</span><span class="n">foo</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="s1">&#39;goodbye&#39;</span><span class="p">)</span>
<span class="go">&#39;goodbye: 33&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">foo</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">*</span> <span class="n">c</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">bar</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">d</span><span class="si">=}</span><span class="s2">, </span><span class="si">{</span><span class="n">e</span><span class="si">=}</span><span class="s2">&quot;</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@dataclass</span>
<span class="gp">... </span><span class="k">class</span><span class="w"> </span><span class="nc">K</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">a</span><span class="p">:</span> <span class="nb">int</span>
<span class="gp">... </span>    <span class="n">e</span><span class="p">:</span> <span class="nb">int</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">C</span> <span class="o">=</span> <span class="n">bind_funcs_object_attrs</span><span class="p">([</span><span class="n">foo</span><span class="p">,</span> <span class="n">bar</span><span class="p">],</span> <span class="s1">&#39;a e&#39;</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="n">K</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">signature</span><span class="p">(</span><span class="n">C</span><span class="p">))</span>
<span class="go">&#39;(a: int, e: int) -&gt; None&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">str</span><span class="p">(</span><span class="n">signature</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">foo</span><span class="p">))</span> <span class="o">==</span> <span class="s1">&#39;(b, c)&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">foo</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="go">13</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">str</span><span class="p">(</span><span class="n">signature</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">bar</span><span class="p">))</span> <span class="o">==</span> <span class="s1">&#39;(d)&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="go">&#39;d=5, e=2&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="i2.wrapper.bind_funcs_object_attrs_old">
<span class="sig-prename descclassname"><span class="pre">i2.wrapper.</span></span><span class="sig-name descname"><span class="pre">bind_funcs_object_attrs_old</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">funcs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">init_params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cls</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/wrapper.html#bind_funcs_object_attrs_old"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.wrapper.bind_funcs_object_attrs_old" title="Link to this definition"></a></dt>
<dd><p>Transform one or several functions into a class that contains them as methods
sourcing specific arguments from the instance’s attributes.
&gt;&gt;&gt; from inspect import signature
&gt;&gt;&gt; from dataclasses import dataclass
&gt;&gt;&gt;
&gt;&gt;&gt; def foo(a, b, c=2, <a href="#id1"><span class="problematic" id="id2">*</span></a>, d=’bar’):
…     return f”{d}: {(a + b) * c}”
&gt;&gt;&gt; foo(1, 2)
‘bar: 6’
&gt;&gt;&gt; Klass = bind_funcs_object_attrs_old(foo, init_params=’a c’)
&gt;&gt;&gt; Klass.__name__
‘Foo’
&gt;&gt;&gt; instance = Klass(a=1, c=3)
&gt;&gt;&gt; assert instance.foo(2, d=’hello’) == ‘hello: 9’ == foo(
…     a=1, b=2, c=3, d=’hello’)
&gt;&gt;&gt; str(signature(Klass))
‘(a, c=2) -&gt; None’
&gt;&gt;&gt;
&gt;&gt;&gt; instance = Klass(a=1, c=3)
&gt;&gt;&gt; str(instance)
‘Foo(a=1, c=3)’
&gt;&gt;&gt; str(signature(instance.foo))
“(b, <a href="#id3"><span class="problematic" id="id4">*</span></a>, d=’bar’)”
&gt;&gt;&gt; instance.foo(2, d=’hello’)
‘hello: 9’
&gt;&gt;&gt; instance.foo(10, d=’goodbye’)
‘goodbye: 33’
&gt;&gt;&gt; def foo(a, b, c):
…     return a + b * c
…
&gt;&gt;&gt; def bar(d, e):
…     return f”{d=}, {e=}”
…
&gt;&gt;&gt; &#64;dataclass
… class K:
…     a: int
…     e: int
…
&gt;&gt;&gt; C = bind_funcs_object_attrs([foo, bar], ‘a e’, cls=K)
&gt;&gt;&gt; str(signature(C))
‘(a: int, e: int) -&gt; None’
&gt;&gt;&gt; c = C(1,2)
&gt;&gt;&gt; assert str(signature(c.foo)) == ‘(b, c)’
&gt;&gt;&gt; c.foo(3,4)
13
&gt;&gt;&gt; assert str(signature(c.bar)) == ‘(d)’
&gt;&gt;&gt; c.bar(5)
‘d=5, e=2’</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="i2.wrapper.camelize">
<span class="sig-prename descclassname"><span class="pre">i2.wrapper.</span></span><span class="sig-name descname"><span class="pre">camelize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/wrapper.html#camelize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.wrapper.camelize" title="Link to this definition"></a></dt>
<dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">camelize</span><span class="p">(</span><span class="s1">&#39;camel_case&#39;</span><span class="p">)</span>
<span class="go">&#39;CamelCase&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="i2.wrapper.complete_dict_applying_functions">
<span class="sig-prename descclassname"><span class="pre">i2.wrapper.</span></span><span class="sig-name descname"><span class="pre">complete_dict_applying_functions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_only_if_name_missing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_allow_overwrites</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">func_for_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/wrapper.html#complete_dict_applying_functions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.wrapper.complete_dict_applying_functions" title="Link to this definition"></a></dt>
<dd><p>Complete dict <code class="docutils literal notranslate"><span class="pre">d</span></code> by applying function to variables in <code class="docutils literal notranslate"><span class="pre">d</span></code>, sequentially.</p>
<p>That is, doing <code class="docutils literal notranslate"><span class="pre">d[name]</span> <span class="pre">=</span> <span class="pre">func(**d)</span></code> for all <code class="docutils literal notranslate"><span class="pre">name,</span> <span class="pre">func</span> <span class="pre">in</span> <span class="pre">d.items()</span></code>.</p>
<p>Set <code class="docutils literal notranslate"><span class="pre">_allow_overwrites=True</span></code> to allow overwrites.</p>
<p>Set <code class="docutils literal notranslate"><span class="pre">_only_if_name_missing=False</span></code> to apply all functions of <code class="docutils literal notranslate"><span class="pre">func_for_name</span></code>
regardless if the <code class="docutils literal notranslate"><span class="pre">name</span></code> already exists in <code class="docutils literal notranslate"><span class="pre">d</span></code> or not.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">func_for_name</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">b</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">a</span> <span class="o">*</span> <span class="mi">10</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="k">lambda</span> <span class="n">c</span><span class="p">:</span> <span class="n">c</span> <span class="o">*</span> <span class="mi">2</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">complete_dict_applying_functions</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> <span class="o">**</span><span class="n">func_for_name</span><span class="p">)</span>
<span class="go">{&#39;a&#39;: 1, &#39;b&#39;: 10, &#39;c&#39;: 11, &#39;d&#39;: 22}</span>
</pre></div>
</div>
<p>Notice that when <code class="docutils literal notranslate"><span class="pre">b</span></code> is present in input <code class="docutils literal notranslate"><span class="pre">dict</span></code>, it’s value is conserved.
That is, the <code class="docutils literal notranslate"><span class="pre">b</span></code> of <code class="docutils literal notranslate"><span class="pre">func_for_name</span></code> isn’t applied to compute it.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">complete_dict_applying_functions</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span> <span class="o">**</span><span class="n">func_for_name</span><span class="p">)</span>
<span class="go">{&#39;a&#39;: 1, &#39;b&#39;: 2, &#39;c&#39;: 3, &#39;d&#39;: 6}</span>
</pre></div>
</div>
<p>If you specify <code class="docutils literal notranslate"><span class="pre">_only_if_name_missing=False</span></code>,
<code class="docutils literal notranslate"><span class="pre">complete_dict_applying_functions</span></code> will try to compute everything
<code class="docutils literal notranslate"><span class="pre">func_for_name</span></code> tells it too, regardless if the input dictionary contains the
key or not, resulting in an error:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">complete_dict_applying_functions</span><span class="p">(</span>
<span class="gp">... </span>    <span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span> <span class="o">**</span><span class="n">func_for_name</span><span class="p">,</span> <span class="n">_only_if_name_missing</span><span class="o">=</span><span class="kc">False</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="w">  </span><span class="c">...</span>
<span class="gr">i2.errors.OverwritesNotAllowed</span>: <span class="n">You&#39;re not allowed to overwrite to the values of b</span>
</pre></div>
</div>
<p>If you want, on the other hand, to allow overwrites, you can do so specifying
<code class="docutils literal notranslate"><span class="pre">_allow_overwrites=True</span></code>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">complete_dict_applying_functions</span><span class="p">(</span>
<span class="gp">... </span>    <span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span> <span class="o">**</span><span class="n">func_for_name</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">_only_if_name_missing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">_allow_overwrites</span><span class="o">=</span><span class="kc">True</span>
<span class="gp">... </span><span class="p">)</span>
<span class="go">{&#39;a&#39;: 1, &#39;b&#39;: 10, &#39;c&#39;: 11, &#39;d&#39;: 22}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="i2.wrapper.func_to_method_func">
<span class="sig-prename descclassname"><span class="pre">i2.wrapper.</span></span><span class="sig-name descname"><span class="pre">func_to_method_func</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance_params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method_params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance_arg_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'self'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Callable</span></span></span><a class="reference internal" href="../../_modules/i2/wrapper.html#func_to_method_func"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.wrapper.func_to_method_func" title="Link to this definition"></a></dt>
<dd><p>Get a ‘method function’ from a ‘normal function’. Also known as “methodize”.</p>
<p>That is, get a function that gives the same outputs as the ‘normal function’,
except that some of the arguments are sourced from the attributes of the first
argument.</p>
<p>The intended use case is when you want to inject one or several methods in a class
or instance, sourcing some of the arguments of the underlying function from a
common pool: The attributes of the instance.</p>
<p>Consider the following function involving four parameters: <code class="docutils literal notranslate"><span class="pre">a,</span> <span class="pre">b,</span> <span class="pre">c</span></code> and <code class="docutils literal notranslate"><span class="pre">d</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">func</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">d</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">c</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">func</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
<span class="go">&#39;hello: 9&#39;</span>
</pre></div>
</div>
<p>If we wanted to make an equivalent “method function” that would source it’s <code class="docutils literal notranslate"><span class="pre">a</span></code>
and it’s <code class="docutils literal notranslate"><span class="pre">c</span></code> from the first argument’s (in practice this first argument will be
and instance of the class the method will be bound to), we can do so like so:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">method_func</span> <span class="o">=</span> <span class="n">func_to_method_func</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="s1">&#39;a c&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">inspect</span><span class="w"> </span><span class="kn">import</span> <span class="n">signature</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">signature</span><span class="p">(</span><span class="n">method_func</span><span class="p">))</span>
<span class="go">&quot;(self, b: int, *, d=&#39;bar&#39;)&quot;</span>
</pre></div>
</div>
<p>Note that the first argument is <code class="docutils literal notranslate"><span class="pre">self</span></code> (default name for an “instance”),
that <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">c</span></code> are not there, but that the two remaining parameters,
<code class="docutils literal notranslate"><span class="pre">b</span></code> and <code class="docutils literal notranslate"><span class="pre">d</span></code> are present, in the same order, and with the same annotations and
parameter kind (the <code class="docutils literal notranslate"><span class="pre">d</span></code> is still keyword-only).</p>
<p>Now let’s make a dummy object that has attributes <code class="docutils literal notranslate"><span class="pre">a</span></code> and a <code class="docutils literal notranslate"><span class="pre">c</span></code>, and use it to
call <code class="docutils literal notranslate"><span class="pre">method_func</span></code>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">namedtuple</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s1">&#39;FakeInstance&#39;</span><span class="p">,</span> <span class="s1">&#39;a c&#39;</span><span class="p">)(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">method_func</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
<span class="go">&#39;hello: 9&#39;</span>
</pre></div>
</div>
<p>Which is:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">method_func</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">func</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Often, though, what you’ll want is to include this method function directly in
a class, as you’re making that class “normally”. That works too:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@dataclass</span>
<span class="gp">... </span><span class="k">class</span><span class="w"> </span><span class="nc">Klass</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">a</span> <span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">... </span>    <span class="n">c</span> <span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span>
<span class="gp">... </span>    <span class="n">method_func</span> <span class="o">=</span> <span class="n">func_to_method_func</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="s1">&#39;a c&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">Klass</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span><span class="o">.</span><span class="n">method_func</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
<span class="go">&#39;hello: 9&#39;</span>
</pre></div>
</div>
<p>What if your function has argument names that don’t correspond to the names you
have, or want, as attributes of the class? Or even, you have several functions that
share an argument name that need to be bound to a different attribute?</p>
<p>For that, just use <code class="docutils literal notranslate"><span class="pre">map_names</span></code> to wrap the function, giving it the names that
you need to give it to have the effect you want (the binding of those arguments
to attributes of the instance):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">i2.wrapper</span><span class="w"> </span><span class="kn">import</span> <span class="n">ch_names</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">func</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">d</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">z</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@dataclass</span>
<span class="gp">... </span><span class="k">class</span><span class="w"> </span><span class="nc">Klass</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">a</span> <span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">... </span>    <span class="n">c</span> <span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span>
<span class="gp">... </span>    <span class="n">method_func</span> <span class="o">=</span> <span class="n">func_to_method_func</span><span class="p">(</span><span class="n">ch_names</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="s1">&#39;c&#39;</span><span class="p">),</span> <span class="s1">&#39;a c&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">Klass</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span><span class="o">.</span><span class="n">method_func</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
<span class="go">&#39;hello: 9&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="i2.wrapper.identity">
<span class="sig-prename descclassname"><span class="pre">i2.wrapper.</span></span><span class="sig-name descname"><span class="pre">identity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/wrapper.html#identity"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.wrapper.identity" title="Link to this definition"></a></dt>
<dd><p>Transparent function, returning what’s been input</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="i2.wrapper.include_exclude_ingress_factory">
<span class="sig-prename descclassname"><span class="pre">i2.wrapper.</span></span><span class="sig-name descname"><span class="pre">include_exclude_ingress_factory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_partial</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/wrapper.html#include_exclude_ingress_factory"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.wrapper.include_exclude_ingress_factory" title="Link to this definition"></a></dt>
<dd><p>A pattern underlying any ingress that takes a subset of parameters (possibly
reordering them).</p>
<p>For example: Keep only required arguments, or reorder params to be able to
partialize #3 (without having to partialize #1 and #2)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="i2.wrapper.items_with_mapped_keys">
<span class="sig-prename descclassname"><span class="pre">i2.wrapper.</span></span><span class="sig-name descname"><span class="pre">items_with_mapped_keys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key_mapper</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/wrapper.html#items_with_mapped_keys"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.wrapper.items_with_mapped_keys" title="Link to this definition"></a></dt>
<dd><p>Transform dict keys. More precisely yield (new_k,v) pairs from a key mapper dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>d</strong> – src dict</p></li>
<li><p><strong>key_mapper</strong> – {old_name: new_name, …} mapping</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>generator of (new_name, value) pairs</p>
</dd>
</dl>
<p>Often used in conjunction with dict:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">dict</span><span class="p">(</span><span class="n">items_with_mapped_keys</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">},</span>
<span class="gp">... </span>    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;Ay&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="s1">&#39;Dee&#39;</span><span class="p">})</span>
<span class="gp">... </span><span class="p">)</span>
<span class="go">{&#39;Ay&#39;: 1, &#39;b&#39;: 2, &#39;c&#39;: 3, &#39;Dee&#39;: 4}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="i2.wrapper.kwargs_trans">
<span class="sig-prename descclassname"><span class="pre">i2.wrapper.</span></span><span class="sig-name descname"><span class="pre">kwargs_trans</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_recursive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">key_and_val_func</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/wrapper.html#kwargs_trans"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.wrapper.kwargs_trans" title="Link to this definition"></a></dt>
<dd><p>Transform a kwargs dict or build a transformer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>kwargs</strong> – The dict containing the input kwargs that we will transform</p></li>
<li><p><strong>_recursive</strong> – Whether the transformations listed in <code class="docutils literal notranslate"><span class="pre">key_and_val_func</span></code> should
be applied “recursively”. When set to <code class="docutils literal notranslate"><span class="pre">False</span></code> (default), each transformation
function applies to the original <code class="docutils literal notranslate"><span class="pre">kwargs</span></code>, not the one that was transformed,
so far.</p></li>
<li><p><strong>_inplace</strong> – If set to <code class="docutils literal notranslate"><span class="pre">False</span></code> will make a shallow copy of the <code class="docutils literal notranslate"><span class="pre">kwargs</span></code>
before transforming it (only relevant if <code class="docutils literal notranslate"><span class="pre">_recursive=True</span></code></p></li>
<li><p><strong>key_and_val_func</strong> – The <code class="docutils literal notranslate"><span class="pre">key=val_func</span></code> pairs that indicate that a
<code class="docutils literal notranslate"><span class="pre">val_func</span></code> should be applied to the <code class="docutils literal notranslate"><span class="pre">kwargs</span></code>, maching the argument names of
the <code class="docutils literal notranslate"><span class="pre">val_func</span></code> to the keys of <code class="docutils literal notranslate"><span class="pre">kwargs</span></code> and extracting the values found
therein to use for the corresponding inputs of that <code class="docutils literal notranslate"><span class="pre">val_func</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The transformed kwargs.</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kwargs_trans</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">d</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">a</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">a</span> <span class="o">*</span> <span class="mi">10</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">b</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="gp">... </span><span class="p">)</span>
<span class="go">{&#39;a&#39;: 10, &#39;b&#39;: 3, &#39;c&#39;: 3}</span>
</pre></div>
</div>
<p>See that <code class="docutils literal notranslate"><span class="pre">d</span></code> is unchanged here (transformation is not in place).</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span>
<span class="go">{&#39;a&#39;: 1, &#39;b&#39;: 2, &#39;c&#39;: 3}</span>
</pre></div>
</div>
<p>Typically you’ll use <code class="docutils literal notranslate"><span class="pre">kwargs_trans</span></code> as a factory:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">trans</span> <span class="o">=</span> <span class="n">kwargs_trans</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">a</span> <span class="o">*</span> <span class="mi">10</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trans</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="go">{&#39;a&#39;: 10, &#39;b&#39;: 3, &#39;c&#39;: 3}</span>
</pre></div>
</div>
<p>Here we’ll demo what the <code class="docutils literal notranslate"><span class="pre">_recursive</span></code> and <code class="docutils literal notranslate"><span class="pre">_inplace</span></code> arguments do.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">functools</span><span class="w"> </span><span class="kn">import</span> <span class="n">partial</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">re_kwargs_trans</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">kwargs_trans</span><span class="p">,</span> <span class="n">_recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">_inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">re_kwargs_trans</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">d</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">a</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">a</span> <span class="o">*</span> <span class="mi">10</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">b</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="gp">... </span>    <span class="c1"># since _recursive=True, the a that is used is the new a = 10, not a = 1:</span>
<span class="gp">... </span><span class="p">)</span>
<span class="go">{&#39;a&#39;: 10, &#39;b&#39;: 12, &#39;c&#39;: 3}</span>
</pre></div>
</div>
<p>Since <code class="docutils literal notranslate"><span class="pre">_inplace=True</span></code>, <code class="docutils literal notranslate"><span class="pre">d</span></code> itself has changed:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span>
<span class="go">{&#39;a&#39;: 10, &#39;b&#39;: 12, &#39;c&#39;: 3}</span>
</pre></div>
</div>
<p>Sometimes you’ll pipe several transformers together:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">i2</span><span class="w"> </span><span class="kn">import</span> <span class="n">Pipe</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trans</span> <span class="o">=</span> <span class="n">Pipe</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">re_kwargs_trans</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">a</span> <span class="o">/</span> <span class="mi">10</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">re_kwargs_trans</span><span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">:</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span> <span class="o">*</span> <span class="n">c</span><span class="p">),</span>
<span class="gp">... </span>    <span class="c1"># and then compute a new value of a using a and c:</span>
<span class="gp">... </span>    <span class="n">re_kwargs_trans</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">c</span><span class="p">:</span> <span class="n">c</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trans</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="go">{&#39;a&#39;: 35.0, &#39;b&#39;: 12, &#39;c&#39;: 36.0}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="i2.wrapper.move_names_to_the_end">
<span class="sig-prename descclassname"><span class="pre">i2.wrapper.</span></span><span class="sig-name descname"><span class="pre">move_names_to_the_end</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">names</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">names_to_move_to_the_end</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/wrapper.html#move_names_to_the_end"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.wrapper.move_names_to_the_end" title="Link to this definition"></a></dt>
<dd><p>Remove the items of <code class="docutils literal notranslate"><span class="pre">names_to_move_to_the_end</span></code> from <code class="docutils literal notranslate"><span class="pre">names</span></code>
and append to the right of names</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">,</span><span class="s1">&#39;d&#39;</span><span class="p">,</span><span class="s1">&#39;e&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">names_to_move_to_the_end</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">,</span><span class="s1">&#39;e&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">move_names_to_the_end</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="n">names_to_move_to_the_end</span><span class="p">)</span>
<span class="go">[&#39;a&#39;, &#39;d&#39;, &#39;c&#39;, &#39;e&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">names_to_move_to_the_end</span> <span class="o">=</span> <span class="s1">&#39;c e&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">move_names_to_the_end</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="n">names_to_move_to_the_end</span><span class="p">)</span>
<span class="go">[&#39;a&#39;, &#39;d&#39;, &#39;c&#39;, &#39;e&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="i2.wrapper.move_params_to_the_end">
<span class="sig-prename descclassname"><span class="pre">i2.wrapper.</span></span><span class="sig-name descname"><span class="pre">move_params_to_the_end</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">names_to_move</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/wrapper.html#move_params_to_the_end"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.wrapper.move_params_to_the_end" title="Link to this definition"></a></dt>
<dd><p>Choose args from func, according to choice_args_func and move them
to the right</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">functools</span><span class="w"> </span><span class="kn">import</span> <span class="n">partial</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">i2</span><span class="w"> </span><span class="kn">import</span> <span class="n">Sig</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">foo</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">+</span> <span class="n">c</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">foo</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>  <span class="c1"># fixing a, which is before b</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">h</span> <span class="o">=</span> <span class="n">move_params_to_the_end</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">Sig</span><span class="p">(</span><span class="n">g</span><span class="p">)</span><span class="o">.</span><span class="n">defaults</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">str</span><span class="p">(</span><span class="n">Sig</span><span class="p">(</span><span class="n">g</span><span class="p">))</span> <span class="o">==</span> <span class="s1">&#39;(a, *, b=4, c)&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">str</span><span class="p">(</span><span class="n">Sig</span><span class="p">(</span><span class="n">h</span><span class="p">))</span> <span class="o">==</span> <span class="s1">&#39;(a, *, c, b=4)&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="i2.wrapper.partialx">
<span class="sig-prename descclassname"><span class="pre">i2.wrapper.</span></span><span class="sig-name descname"><span class="pre">partialx</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__name__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_rm_partialize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_allow_reordering</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/wrapper.html#partialx"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.wrapper.partialx" title="Link to this definition"></a></dt>
<dd><p>Extends the functionality of builtin <code class="docutils literal notranslate"><span class="pre">functools.partial</span></code> with the ability to</p>
<ul class="simple">
<li><p>set <a href="#id5"><span class="problematic" id="id6">``</span></a>__name__ ``</p></li>
<li><p>remove partialized arguments from signature</p></li>
<li><p>reorder params (so that defaults are at the end)</p></li>
</ul>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">*</span> <span class="n">c</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">curried_f</span> <span class="o">=</span> <span class="n">partialx</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">_rm_partialize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">curried_f</span><span class="o">.</span><span class="vm">__name__</span>
<span class="go">&#39;f&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">inspect</span><span class="w"> </span><span class="kn">import</span> <span class="n">signature</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">signature</span><span class="p">(</span><span class="n">curried_f</span><span class="p">))</span>
<span class="go">&#39;(a, b=2)&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">*</span> <span class="n">c</span>
</pre></div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">a</span></code> gets a default, but <code class="docutils literal notranslate"><span class="pre">b</span></code> does not, yet is after <code class="docutils literal notranslate"><span class="pre">a</span></code>.
This is allowed because these parameters all became KEYWORD_ONLY.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">partialx</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">Sig</span><span class="p">(</span><span class="n">g</span><span class="p">))</span>
<span class="go">&#39;(*, a=1, b, c=3)&#39;</span>
</pre></div>
</div>
<p>If you wanted to reorder the parameters to have all defaulted kinds be at the end,
as usual, you can do so using <code class="docutils literal notranslate"><span class="pre">_allow_reordering=True</span></code></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">partialx</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">_allow_reordering</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">Sig</span><span class="p">(</span><span class="n">g</span><span class="p">))</span>
<span class="go">&#39;(*, b, a=1, c=3)&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="i2.wrapper.transparent_egress">
<span class="sig-prename descclassname"><span class="pre">i2.wrapper.</span></span><span class="sig-name descname"><span class="pre">transparent_egress</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/wrapper.html#transparent_egress"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.wrapper.transparent_egress" title="Link to this definition"></a></dt>
<dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">transparent_egress</span><span class="p">(</span><span class="s1">&#39;unnecessary_doctest&#39;</span><span class="p">)</span>
<span class="go">&#39;unnecessary_doctest&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="i2.wrapper.transparent_ingress">
<span class="sig-prename descclassname"><span class="pre">i2.wrapper.</span></span><span class="sig-name descname"><span class="pre">transparent_ingress</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/wrapper.html#transparent_ingress"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.wrapper.transparent_ingress" title="Link to this definition"></a></dt>
<dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">transparent_ingress</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">test</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="go">((1, 2), {&#39;test&#39;: 1})</span>
</pre></div>
</div>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="util.html" class="btn btn-neutral float-left" title="i2.util" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright NO COPYRIGHT.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>