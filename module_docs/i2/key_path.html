<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>i2.key_path &mdash; i2 0.1.24 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=fd3f3429" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=ebdbb45b"></script>
        <script src="../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/toggleprompt.js?v=d7ede5d2"></script>
        <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="i2.multi_object" href="multi_object.html" />
    <link rel="prev" title="i2.itypes" href="itypes.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            i2
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../i2.html">i2</a></li>
<li class="toctree-l1"><a class="reference internal" href="_deprecated.html">i2._deprecated</a></li>
<li class="toctree-l1"><a class="reference internal" href="base.html">i2.base</a></li>
<li class="toctree-l1"><a class="reference internal" href="chain_map.html">i2.chain_map</a></li>
<li class="toctree-l1"><a class="reference internal" href="deco.html">i2.deco</a></li>
<li class="toctree-l1"><a class="reference internal" href="doc_mint.html">i2.doc_mint</a></li>
<li class="toctree-l1"><a class="reference internal" href="errors.html">i2.errors</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">i2.examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/signature_calculus.html">i2.examples.signature_calculus</a></li>
<li class="toctree-l1"><a class="reference internal" href="footprints.html">i2.footprints</a></li>
<li class="toctree-l1"><a class="reference internal" href="io_trans.html">i2.io_trans</a></li>
<li class="toctree-l1"><a class="reference internal" href="itypes.html">i2.itypes</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">i2.key_path</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#i2.key_path.KeyPathMap"><code class="docutils literal notranslate"><span class="pre">KeyPathMap</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#i2.key_path.KeyPathMap.items"><code class="docutils literal notranslate"><span class="pre">KeyPathMap.items()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#i2.key_path.KeyPathTrans"><code class="docutils literal notranslate"><span class="pre">KeyPathTrans</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#i2.key_path.KeyPathTrans.extract_key_paths"><code class="docutils literal notranslate"><span class="pre">KeyPathTrans.extract_key_paths()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#i2.key_path.KeyPathTrans.getitem"><code class="docutils literal notranslate"><span class="pre">KeyPathTrans.getitem()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#i2.key_path.KeyPathTrans.items"><code class="docutils literal notranslate"><span class="pre">KeyPathTrans.items()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#i2.key_path.KeyPathTrans.setitem"><code class="docutils literal notranslate"><span class="pre">KeyPathTrans.setitem()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#i2.key_path.KeyPathTrans.setitem_recursive"><code class="docutils literal notranslate"><span class="pre">KeyPathTrans.setitem_recursive()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#i2.key_path.StrKeyPath"><code class="docutils literal notranslate"><span class="pre">StrKeyPath</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#i2.key_path.StrKeyPath.items"><code class="docutils literal notranslate"><span class="pre">StrKeyPath.items()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#i2.key_path.flatten_dict"><code class="docutils literal notranslate"><span class="pre">flatten_dict()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#i2.key_path.obj_to_str_path"><code class="docutils literal notranslate"><span class="pre">obj_to_str_path()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#i2.key_path.rollout_dict"><code class="docutils literal notranslate"><span class="pre">rollout_dict()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#i2.key_path.str_path_to_obj"><code class="docutils literal notranslate"><span class="pre">str_path_to_obj()</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="multi_object.html">i2.multi_object</a></li>
<li class="toctree-l1"><a class="reference internal" href="routing_forest.html">i2.routing_forest</a></li>
<li class="toctree-l1"><a class="reference internal" href="scrap.html">i2.scrap</a></li>
<li class="toctree-l1"><a class="reference internal" href="scrap/scrap.html">i2.scrap.scrap</a></li>
<li class="toctree-l1"><a class="reference internal" href="scrap/scrap_ch_variadics.html">i2.scrap.scrap_ch_variadics</a></li>
<li class="toctree-l1"><a class="reference internal" href="scrap/scrap_kwargs.html">i2.scrap.scrap_kwargs</a></li>
<li class="toctree-l1"><a class="reference internal" href="scrap/signature_bops.html">i2.scrap.signature_bops</a></li>
<li class="toctree-l1"><a class="reference internal" href="scrap/simple_pymint.html">i2.scrap.simple_pymint</a></li>
<li class="toctree-l1"><a class="reference internal" href="scrap/switch_case_tree.html">i2.scrap.switch_case_tree</a></li>
<li class="toctree-l1"><a class="reference internal" href="signatures.html">i2.signatures</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests.html">i2.tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/footprints_test.html">i2.tests.footprints_test</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/objects_for_testing.html">i2.tests.objects_for_testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/signatures_test.html">i2.tests.signatures_test</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/test_util.html">i2.tests.test_util</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/test_wrapper.html">i2.tests.test_wrapper</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/util.html">i2.tests.util</a></li>
<li class="toctree-l1"><a class="reference internal" href="util.html">i2.util</a></li>
<li class="toctree-l1"><a class="reference internal" href="wrapper.html">i2.wrapper</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">i2</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">i2.key_path</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/module_docs/i2/key_path.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-i2.key_path">
<span id="i2-key-path"></span><h1>i2.key_path<a class="headerlink" href="#module-i2.key_path" title="Link to this heading"></a></h1>
<p>Flattening maps and manipulating key paths</p>
<dl class="py class">
<dt class="sig sig-object py" id="i2.key_path.KeyPathMap">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">i2.key_path.</span></span><span class="sig-name descname"><span class="pre">KeyPathMap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">store=&lt;class</span> <span class="pre">'dict'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key_type:</span> <span class="pre">type</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node_type:</span> <span class="pre">type</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auto_node_writes=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/key_path.html#KeyPathMap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.key_path.KeyPathMap" title="Link to this definition"></a></dt>
<dd><p>Provides a key-path view to a nested mapping (by default, a dict).
A nested mapping can be see as a tree, where if a value is itself a mapping, it is a non-terminal node,
leaves (or terminal) holding the “actual values”.</p>
<p>When wrapping a mapping in KeyPathMap, you can pretend that you have a flat mapping from (root to leaf) paths
instead of a nested structure, and do your mapping CRUD with that view.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>        <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;2a&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;aba&#39;</span><span class="p">,</span>
<span class="gp">... </span>              <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
<span class="gp">... </span>        <span class="p">},</span>
<span class="gp">... </span>     <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mf">3.14</span>
<span class="gp">... </span>    <span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span> <span class="o">=</span> <span class="n">KeyPathMap</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">kp</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
<span class="go">[((&#39;a&#39;, &#39;a&#39;), &#39;2a&#39;), ((&#39;a&#39;, &#39;b&#39;, &#39;a&#39;), &#39;aba&#39;), ((&#39;a&#39;, &#39;b&#39;, &#39;b&#39;), 3), ((&#39;c&#39;,), 3.14)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">kp</span><span class="p">)</span>
<span class="go">[(&#39;a&#39;, &#39;a&#39;), (&#39;a&#39;, &#39;b&#39;, &#39;a&#39;), (&#39;a&#39;, &#39;b&#39;, &#39;b&#39;), (&#39;c&#39;,)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">kp</span><span class="p">)</span>
<span class="go">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">kp</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span><span class="p">(</span><span class="n">kp</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">kp</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
<span class="go">[&#39;2a&#39;, &#39;aba&#39;, 3, 3.14]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span>
<span class="go">{&#39;a&#39;: &#39;2a&#39;, &#39;b&#39;: {&#39;a&#39;: &#39;aba&#39;, &#39;b&#39;: 3}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span><span class="p">[(</span><span class="s1">&#39;a&#39;</span><span class="p">,)]</span>
<span class="go">{&#39;a&#39;: &#39;2a&#39;, &#39;b&#39;: {&#39;a&#39;: &#39;aba&#39;, &#39;b&#39;: 3}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">]</span>
<span class="go">&#39;2a&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">]</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;new_key&#39;</span><span class="p">)</span> <span class="ow">in</span> <span class="n">kp</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;new_key&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;new val&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;new_key&#39;</span><span class="p">)</span> <span class="ow">in</span> <span class="n">kp</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;new_key&#39;</span><span class="p">]</span>
<span class="go">&#39;new val&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">kp</span><span class="p">)</span>
<span class="go">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">kp</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">kp</span><span class="p">)</span>
<span class="go">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">kp</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
<span class="go">[((&#39;a&#39;, &#39;a&#39;), &#39;2a&#39;), ((&#39;a&#39;, &#39;b&#39;, &#39;b&#39;), 3), ((&#39;a&#39;, &#39;new_key&#39;), &#39;new val&#39;), ((&#39;c&#39;,), 3.14)]</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># By default, you can only write on already created nodes. But if auto_node_writes=True, you can do this:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span> <span class="o">=</span> <span class="n">KeyPathMap</span><span class="p">(</span><span class="n">auto_node_writes</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span>
<span class="go">{}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;hi world!&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span>
<span class="go">{&#39;a&#39;: {&#39;b&#39;: {&#39;c&#39;: &#39;hi world!&#39;}}}</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="i2.key_path.KeyPathMap.items">
<span class="sig-name descname"><span class="pre">items</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">a</span> <span class="pre">set-like</span> <span class="pre">object</span> <span class="pre">providing</span> <span class="pre">a</span> <span class="pre">view</span> <span class="pre">on</span> <span class="pre">D's</span> <span class="pre">items</span></span></span><a class="reference internal" href="../../_modules/i2/key_path.html#KeyPathMap.items"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.key_path.KeyPathMap.items" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="i2.key_path.KeyPathTrans">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">i2.key_path.</span></span><span class="sig-name descname"><span class="pre">KeyPathTrans</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sep:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'.'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node_type:</span> <span class="pre">type</span> <span class="pre">=</span> <span class="pre">&lt;class</span> <span class="pre">'dict'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mk_new_node=None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/key_path.html#KeyPathTrans"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.key_path.KeyPathTrans" title="Link to this definition"></a></dt>
<dd><p>Doing what StrKeyPath but where the store that is being operated on is not included in the object, but
given to the method as input.</p>
<dl class="py method">
<dt class="sig sig-object py" id="i2.key_path.KeyPathTrans.extract_key_paths">
<span class="sig-name descname"><span class="pre">extract_key_paths</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key_paths</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field_naming</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'full'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_val</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/key_path.html#KeyPathTrans.extract_key_paths"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.key_path.KeyPathTrans.extract_key_paths" title="Link to this definition"></a></dt>
<dd><p>getting with a key list or “.”-separated string
:param d: dict-like
:param key_path: list or “.”-separated string of keys
:param field_naming: ‘full’ (default) will use key_path strings as is, leaf will only use the last dot item</p>
<blockquote>
<div><p>(i.e. this.is.a.key.path will result in “path” being used)</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p></p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span> <span class="o">=</span> <span class="n">KeyPathTrans</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>        <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;a.a&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="s1">&#39;a.b&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>            <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;a.c.a&#39;</span>
<span class="gp">... </span>        <span class="p">}</span>
<span class="gp">... </span>    <span class="p">},</span>
<span class="gp">... </span>    <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">3</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span><span class="o">.</span><span class="n">extract_key_paths</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="go">{&#39;a&#39;: {&#39;a&#39;: &#39;a.a&#39;, &#39;b&#39;: &#39;a.b&#39;, &#39;c&#39;: {&#39;a&#39;: &#39;a.c.a&#39;}}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span><span class="o">.</span><span class="n">extract_key_paths</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="s1">&#39;a.a&#39;</span><span class="p">)</span>
<span class="go">{&#39;a.a&#39;: &#39;a.a&#39;}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span><span class="o">.</span><span class="n">extract_key_paths</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="s1">&#39;a.c&#39;</span><span class="p">)</span>
<span class="go">{&#39;a.c&#39;: {&#39;a&#39;: &#39;a.c.a&#39;}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span><span class="o">.</span><span class="n">extract_key_paths</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;a.a&#39;</span><span class="p">,</span> <span class="s1">&#39;a.c&#39;</span><span class="p">])</span>
<span class="go">{&#39;a.a&#39;: &#39;a.a&#39;, &#39;a.c&#39;: {&#39;a&#39;: &#39;a.c.a&#39;}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span><span class="o">.</span><span class="n">extract_key_paths</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;a.a&#39;</span><span class="p">,</span> <span class="s1">&#39;something.thats.not.there&#39;</span><span class="p">])</span>  <span class="c1"># missing key just won&#39;t be included</span>
<span class="go">{&#39;a.a&#39;: &#39;a.a&#39;}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span><span class="o">.</span><span class="n">extract_key_paths</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;a.a&#39;</span><span class="p">,</span> <span class="s1">&#39;something.thats.not.there&#39;</span><span class="p">],</span> <span class="n">use_default</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default_val</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
<span class="go">{&#39;a.a&#39;: &#39;a.a&#39;, &#39;something.thats.not.there&#39;: 42}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="i2.key_path.KeyPathTrans.getitem">
<span class="sig-name descname"><span class="pre">getitem</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_val</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/key_path.html#KeyPathTrans.getitem"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.key_path.KeyPathTrans.getitem" title="Link to this definition"></a></dt>
<dd><p>getting with a key list or “.”-separated string
:param d: dict-like
:param key_path: list or “.”-separated string of keys
:return:</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="i2.key_path.KeyPathTrans.items">
<span class="sig-name descname"><span class="pre">items</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key_path_prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/key_path.html#KeyPathTrans.items"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.key_path.KeyPathTrans.items" title="Link to this definition"></a></dt>
<dd><p>iterate through items of store recursively, yielding (key_path, val) pairs for all nested values that are not
store types.
That is, if a value is a store_type, it won’t generate a yield, but rather, will be iterated through
recursively.
:param d: input store
:param key_path_so_far: string to be prepended to all key paths (for use in recursion, not meant for direct use)
:return: a (key_path, val) iterator</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span> <span class="o">=</span> <span class="n">KeyPathTrans</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">input_dict</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>        <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;a.a&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="s1">&#39;a.b&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>            <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;a.c.a&#39;</span>
<span class="gp">... </span>        <span class="p">}</span>
<span class="gp">... </span>    <span class="p">},</span>
<span class="gp">... </span>    <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">3</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">kp</span><span class="o">.</span><span class="n">items</span><span class="p">(</span><span class="n">input_dict</span><span class="p">))</span>
<span class="go">[(&#39;a.a&#39;, &#39;a.a&#39;), (&#39;a.b&#39;, &#39;a.b&#39;), (&#39;a.c.a&#39;, &#39;a.c.a&#39;), (&#39;b&#39;, &#39;b&#39;), (&#39;c&#39;, 3)]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="i2.key_path.KeyPathTrans.setitem">
<span class="sig-name descname"><span class="pre">setitem</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/key_path.html#KeyPathTrans.setitem"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.key_path.KeyPathTrans.setitem" title="Link to this definition"></a></dt>
<dd><p>setting with a key list or “.”-separated string
:param d: dict
:param key_path: list or “.”-separated string of keys
:param val: value to assign
:return:</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="i2.key_path.KeyPathTrans.setitem_recursive">
<span class="sig-name descname"><span class="pre">setitem_recursive</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/key_path.html#KeyPathTrans.setitem_recursive"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.key_path.KeyPathTrans.setitem_recursive" title="Link to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>d</strong></p></li>
<li><p><strong>key_path</strong></p></li>
<li><p><strong>val</strong></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span> <span class="o">=</span> <span class="n">KeyPathTrans</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">input_dict</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>  <span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="s2">&quot;val of a.c&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<span class="gp">... </span>  <span class="p">},</span>
<span class="gp">... </span>  <span class="s2">&quot;10&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
<span class="gp">... </span>  <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>      <span class="s2">&quot;AA&quot;</span><span class="p">:</span> <span class="mi">3</span>
<span class="gp">... </span>    <span class="p">}</span>
<span class="gp">... </span>  <span class="p">}</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span><span class="o">.</span><span class="n">setitem_recursive</span><span class="p">(</span><span class="n">input_dict</span><span class="p">,</span> <span class="s1">&#39;new.key.path&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">input_dict</span>
<span class="go">{&#39;a&#39;: {&#39;c&#39;: &#39;val of a.c&#39;, &#39;b&#39;: 1}, &#39;10&#39;: 10, &#39;b&#39;: {&#39;B&#39;: {&#39;AA&#39;: 3}}, &#39;new&#39;: {&#39;key&#39;: {&#39;path&#39;: 7}}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span><span class="o">.</span><span class="n">setitem_recursive</span><span class="p">(</span><span class="n">input_dict</span><span class="p">,</span> <span class="s1">&#39;new.key.old.path&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">input_dict</span>
<span class="go">{&#39;a&#39;: {&#39;c&#39;: &#39;val of a.c&#39;, &#39;b&#39;: 1}, &#39;10&#39;: 10, &#39;b&#39;: {&#39;B&#39;: {&#39;AA&#39;: 3}}, &#39;new&#39;: {&#39;key&#39;: {&#39;path&#39;: 7, &#39;old&#39;: {&#39;path&#39;: 8}}}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span><span class="o">.</span><span class="n">setitem_recursive</span><span class="p">(</span><span class="n">input_dict</span><span class="p">,</span> <span class="s1">&#39;new.key&#39;</span><span class="p">,</span> <span class="s1">&#39;new val&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">input_dict</span>
<span class="go">{&#39;a&#39;: {&#39;c&#39;: &#39;val of a.c&#39;, &#39;b&#39;: 1}, &#39;10&#39;: 10, &#39;b&#39;: {&#39;B&#39;: {&#39;AA&#39;: 3}}, &#39;new&#39;: {&#39;key&#39;: &#39;new val&#39;}}</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="i2.key_path.StrKeyPath">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">i2.key_path.</span></span><span class="sig-name descname"><span class="pre">StrKeyPath</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">store=&lt;class</span> <span class="pre">'dict'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key_type:</span> <span class="pre">type</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node_type:</span> <span class="pre">type</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auto_node_writes=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'.'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/key_path.html#StrKeyPath"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.key_path.StrKeyPath" title="Link to this definition"></a></dt>
<dd><p>A KeyPathMap, but where the key paths are expressed as string with a separator.
If sep = ‘.’, then instead of using (‘a’, ‘b’, ‘c’) as a key, you can use ‘a.b.c’.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>        <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;2a&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;aba&#39;</span><span class="p">,</span>
<span class="gp">... </span>              <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
<span class="gp">... </span>        <span class="p">},</span>
<span class="gp">... </span>     <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mf">3.14</span>
<span class="gp">... </span>    <span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Example with sep=&#39;/&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span> <span class="o">=</span> <span class="n">StrKeyPath</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">kp</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
<span class="go">[(&#39;a/a&#39;, &#39;2a&#39;), (&#39;a/b/a&#39;, &#39;aba&#39;), (&#39;a/b/b&#39;, 3), (&#39;c&#39;, 3.14)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># You can also add a prefix to the keys</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span> <span class="o">=</span> <span class="n">StrKeyPath</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;http://&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">kp</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
<span class="go">[(&#39;http://a/a&#39;, &#39;2a&#39;), (&#39;http://a/b/a&#39;, &#39;aba&#39;), (&#39;http://a/b/b&#39;, 3), (&#39;http://c&#39;, 3.14)]</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Default sep is &#39;.&#39;, so we&#39;ll work with that:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span> <span class="o">=</span> <span class="n">StrKeyPath</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span>
<span class="go">{&#39;a&#39;: {&#39;a&#39;: &#39;2a&#39;, &#39;b&#39;: {&#39;a&#39;: &#39;aba&#39;, &#39;b&#39;: 3}}, &#39;c&#39;: 3.14}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">kp</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
<span class="go">[(&#39;a.a&#39;, &#39;2a&#39;), (&#39;a.b.a&#39;, &#39;aba&#39;), (&#39;a.b.b&#39;, 3), (&#39;c&#39;, 3.14)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">kp</span><span class="p">)</span>
<span class="go">[&#39;a.a&#39;, &#39;a.b.a&#39;, &#39;a.b.b&#39;, &#39;c&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">kp</span><span class="p">)</span>
<span class="go">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">kp</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span><span class="p">(</span><span class="n">kp</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">kp</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
<span class="go">[&#39;2a&#39;, &#39;aba&#39;, 3, 3.14]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span>
<span class="go">{&#39;a&#39;: &#39;2a&#39;, &#39;b&#39;: {&#39;a&#39;: &#39;aba&#39;, &#39;b&#39;: 3}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span><span class="p">[</span><span class="s1">&#39;a.a&#39;</span><span class="p">]</span>
<span class="go">&#39;2a&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span><span class="p">[</span><span class="s1">&#39;a.b.b&#39;</span><span class="p">]</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="s1">&#39;a.new_key&#39;</span><span class="p">)</span> <span class="ow">in</span> <span class="n">kp</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span><span class="p">[</span><span class="s1">&#39;a.new_key&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;new val&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;a.new_key&#39;</span> <span class="ow">in</span> <span class="n">kp</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span><span class="p">[</span><span class="s1">&#39;a.new_key&#39;</span><span class="p">]</span>
<span class="go">&#39;new val&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">kp</span><span class="p">)</span>
<span class="go">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">kp</span><span class="p">[</span><span class="s1">&#39;a.b.a&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">kp</span><span class="p">)</span>
<span class="go">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">kp</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
<span class="go">[(&#39;a.a&#39;, &#39;2a&#39;), (&#39;a.b.b&#39;, 3), (&#39;a.new_key&#39;, &#39;new val&#39;), (&#39;c&#39;, 3.14)]</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># By default, you can only write on already created nodes. But if auto_node_writes=True, you can do this:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span> <span class="o">=</span> <span class="n">StrKeyPath</span><span class="p">(</span><span class="n">auto_node_writes</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span>
<span class="go">{}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span><span class="p">[</span><span class="s1">&#39;a.b.c&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;hi world!&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kp</span>
<span class="go">{&#39;a&#39;: {&#39;b&#39;: {&#39;c&#39;: &#39;hi world!&#39;}}}</span>
<span class="gp">&gt;&gt;&gt;</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="i2.key_path.StrKeyPath.items">
<span class="sig-name descname"><span class="pre">items</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">a</span> <span class="pre">set-like</span> <span class="pre">object</span> <span class="pre">providing</span> <span class="pre">a</span> <span class="pre">view</span> <span class="pre">on</span> <span class="pre">D's</span> <span class="pre">items</span></span></span><a class="reference internal" href="../../_modules/i2/key_path.html#StrKeyPath.items"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.key_path.StrKeyPath.items" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="i2.key_path.flatten_dict">
<span class="sig-prename descclassname"><span class="pre">i2.key_path.</span></span><span class="sig-name descname"><span class="pre">flatten_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/key_path.html#flatten_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.key_path.flatten_dict" title="Link to this definition"></a></dt>
<dd><p>Computes a “flat” dict from a nested one. A flat dict’s keys are the paths of the input dict.
These paths will be expressed as tuples of the original keys by defaults.
If these keys are strings though, you can use sep and prefix to get string representations of the paths.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>d</strong> – a nested dict</p></li>
<li><p><strong>sep</strong> – The separator character (or string) in a string representation of the paths.</p></li>
<li><p><strong>prefix</strong> – A string to prepend on all the paths</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A flat dict</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>        <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;2a&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;aca&#39;</span><span class="p">,</span> <span class="s1">&#39;u&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">}</span>
<span class="gp">... </span>        <span class="p">},</span>
<span class="gp">... </span>     <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">3</span>
<span class="gp">... </span>    <span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flatten_dict</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="go">{(&#39;a&#39;, &#39;a&#39;): &#39;2a&#39;, (&#39;a&#39;, &#39;c&#39;, &#39;a&#39;): &#39;aca&#39;, (&#39;a&#39;, &#39;c&#39;, &#39;u&#39;): 4, (&#39;c&#39;,): 3}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flatten_dict</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
<span class="go">{&#39;a.a&#39;: &#39;2a&#39;, &#39;a.c.a&#39;: &#39;aca&#39;, &#39;a.c.u&#39;: 4, &#39;c&#39;: 3}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flatten_dict</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;/ROOT/&#39;</span><span class="p">)</span>
<span class="go">{&#39;/ROOT/a/a&#39;: &#39;2a&#39;, &#39;/ROOT/a/c/a&#39;: &#39;aca&#39;, &#39;/ROOT/a/c/u&#39;: 4, &#39;/ROOT/c&#39;: 3}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="i2.key_path.obj_to_str_path">
<span class="sig-prename descclassname"><span class="pre">i2.key_path.</span></span><span class="sig-name descname"><span class="pre">obj_to_str_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name_of_obj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">operator.attrgetter('__qualname__')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path_of_module</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">operator.attrgetter('__module__')</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/key_path.html#obj_to_str_path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.key_path.obj_to_str_path" title="Link to this definition"></a></dt>
<dd><p>Get the dotpath reference for an object</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">inspect</span> <span class="kn">import</span> <span class="n">Signature</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj_to_str_path</span><span class="p">(</span><span class="n">Signature</span><span class="o">.</span><span class="n">replace</span><span class="p">)</span>
<span class="go">&#39;inspect.Signature.replace&#39;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">obj_to_str_path</span></code> is the inverse of <code class="docutils literal notranslate"><span class="pre">str_path_to_obj</span></code></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">str_path_to_obj</span><span class="p">(</span><span class="n">obj_to_str_path</span><span class="p">(</span><span class="n">Signature</span><span class="o">.</span><span class="n">replace</span><span class="p">))</span> <span class="o">==</span> <span class="n">Signature</span><span class="o">.</span><span class="n">replace</span>
</pre></div>
</div>
<p>Let’s try with a different separator.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">path</span> <span class="o">=</span> <span class="n">obj_to_str_path</span><span class="p">(</span><span class="n">Signature</span><span class="o">.</span><span class="n">replace</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path</span>
<span class="go">&#39;inspect/Signature.replace&#39;</span>
</pre></div>
</div>
<p>Remember to specify the same <code class="docutils literal notranslate"><span class="pre">sep</span></code> when you do the inverse!</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">str_path_to_obj</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;/&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">Signature</span><span class="o">.</span><span class="n">replace</span>
</pre></div>
</div>
<p>You can also pass in your own <code class="docutils literal notranslate"><span class="pre">name_of_obj</span></code> and <code class="docutils literal notranslate"><span class="pre">path_of_module</span></code> functions.
For example you want a more permissive version of <cite>name_of_obj</cite> you may consider
<code class="docutils literal notranslate"><span class="pre">i2.name_of_obj</span></code>.
Note, thought, that <code class="docutils literal notranslate"><span class="pre">str_path_to_obj</span></code> might not work as an inverse for
custom <code class="docutils literal notranslate"><span class="pre">name_of_obj</span></code> and <code class="docutils literal notranslate"><span class="pre">path_of_module</span></code> functions.
You may have to write your own inverse function in this case.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="i2.key_path.rollout_dict">
<span class="sig-prename descclassname"><span class="pre">i2.key_path.</span></span><span class="sig-name descname"><span class="pre">rollout_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/key_path.html#rollout_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.key_path.rollout_dict" title="Link to this definition"></a></dt>
<dd><p>Get the nested path of a flat (key path) dict. This is the inverse of flatten_dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>d</strong> – a flat dict (i.e. one whose keys are paths of a nested dict)</p></li>
<li><p><strong>sep</strong> – If None (default), the paths should be key tuples. If a string, it it assumed to be
the separator of string representations of the path</p></li>
<li><p><strong>prefix</strong> – A string that has be prepended to all each key (path) of the input dict
(and therefore should be removed)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The corresponding nested path</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">flat_d</span> <span class="o">=</span> <span class="p">{(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">):</span> <span class="s1">&#39;2a&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">):</span> <span class="s1">&#39;aca&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;u&#39;</span><span class="p">):</span> <span class="mi">4</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">,):</span> <span class="mi">3</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rollout_dict</span><span class="p">(</span><span class="n">flat_d</span><span class="p">)</span>
<span class="go">{&#39;a&#39;: {&#39;a&#39;: &#39;2a&#39;, &#39;c&#39;: {&#39;a&#39;: &#39;aca&#39;, &#39;u&#39;: 4}}, &#39;c&#39;: 3}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flat_d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a.a&#39;</span><span class="p">:</span> <span class="s1">&#39;2a&#39;</span><span class="p">,</span> <span class="s1">&#39;a.c.a&#39;</span><span class="p">:</span> <span class="s1">&#39;aca&#39;</span><span class="p">,</span> <span class="s1">&#39;a.c.u&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rollout_dict</span><span class="p">(</span><span class="n">flat_d</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
<span class="go">{&#39;a&#39;: {&#39;a&#39;: &#39;2a&#39;, &#39;c&#39;: {&#39;a&#39;: &#39;aca&#39;, &#39;u&#39;: 4}}, &#39;c&#39;: 3}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flat_d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;/ROOT/a/a&#39;</span><span class="p">:</span> <span class="s1">&#39;2a&#39;</span><span class="p">,</span> <span class="s1">&#39;/ROOT/a/c/a&#39;</span><span class="p">:</span> <span class="s1">&#39;aca&#39;</span><span class="p">,</span> <span class="s1">&#39;/ROOT/a/c/u&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;/ROOT/c&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rollout_dict</span><span class="p">(</span><span class="n">flat_d</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;/ROOT/&#39;</span><span class="p">)</span>
<span class="go">{&#39;a&#39;: {&#39;a&#39;: &#39;2a&#39;, &#39;c&#39;: {&#39;a&#39;: &#39;aca&#39;, &#39;u&#39;: 4}}, &#39;c&#39;: 3}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="i2.key_path.str_path_to_obj">
<span class="sig-prename descclassname"><span class="pre">i2.key_path.</span></span><span class="sig-name descname"><span class="pre">str_path_to_obj</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">str_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/i2/key_path.html#str_path_to_obj"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#i2.key_path.str_path_to_obj" title="Link to this definition"></a></dt>
<dd><p>Loads and returns the object referenced by the string DOTPATH_TO_MODULE.OBJ_NAME</p>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="itypes.html" class="btn btn-neutral float-left" title="i2.itypes" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="multi_object.html" class="btn btn-neutral float-right" title="i2.multi_object" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright NO COPYRIGHT.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>